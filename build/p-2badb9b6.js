import{g as R,c as $,a as C}from"./p-00ddae2e.js";import{a as D,b as M,r as H,c as I}from"./p-a533da20.js";import{a as q,K as W}from"./p-565ab761.js";import"./p-b4215fed.js";import"./p-eb6f4547.js";import"./p-c76826f0.js";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const S=new WeakMap,g=(t,n,e,o=0,i=!1)=>{S.has(t)!==e&&(e?j(t,n,o,i):z(t,n))},Y=t=>t===t.getRootNode().activeElement,j=(t,n,e,o=!1)=>{const i=n.parentNode,c=n.cloneNode(!1);c.classList.add("cloned-input"),c.tabIndex=-1,o&&(c.disabled=!0),i.appendChild(c),S.set(t,c);const s=t.ownerDocument.dir==="rtl"?9999:-9999;t.style.pointerEvents="none",n.style.transform=`translate3d(${s}px,${e}px,0) scale(0)`},z=(t,n)=>{const e=S.get(t);e&&(S.delete(t),e.remove()),t.style.pointerEvents="",n.style.transform=""},T=50;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const O=(t,n,e)=>{if(!e||!n)return()=>{};const o=s=>{Y(n)&&g(t,n,s)},i=()=>g(t,n,!1),c=()=>o(!0),a=()=>o(!1);return D(e,"ionScrollStart",c),D(e,"ionScrollEnd",a),n.addEventListener("blur",i),()=>{M(e,"ionScrollStart",c),M(e,"ionScrollEnd",a),n.removeEventListener("blur",i)}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const A="input, textarea, [no-blur], [contenteditable]",U=()=>{let t=!0,n=!1;const e=document,o=()=>{n=!0},i=()=>{t=!0},c=a=>{if(n){n=!1;return}const s=e.activeElement;if(!s||s.matches(A))return;const l=a.target;l!==s&&(l.matches(A)||l.closest(A)||(t=!1,setTimeout(()=>{t||s.blur()},50)))};return D(e,"ionScrollStart",o),e.addEventListener("focusin",i,!0),e.addEventListener("touchend",c,!1),()=>{M(e,"ionScrollStart",o,!0),e.removeEventListener("focusin",i,!0),e.removeEventListener("touchend",c,!1)}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const V=.3,F=(t,n,e)=>{var o;const i=(o=t.closest("ion-item,[ion-item]"))!==null&&o!==void 0?o:t;return G(i.getBoundingClientRect(),n.getBoundingClientRect(),e,t.ownerDocument.defaultView.innerHeight)},G=(t,n,e,o)=>{const i=t.top,c=t.bottom,a=n.top,s=Math.min(n.bottom,o-e),l=a+15,f=s-T-c,u=l-i,m=Math.round(f<0?-f:u>0?-u:0),b=Math.min(m,i-a),L=Math.abs(b)/V,r=Math.min(400,Math.max(150,L));return{scrollAmount:b,scrollDuration:r,scrollPadding:e,inputSafeY:-(i-l)+4}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const B="$ionPaddingTimer",x=(t,n,e)=>{const o=t[B];o&&clearTimeout(o),n>0?t.style.setProperty("--keyboard-offset",`${n}px`):t[B]=setTimeout(()=>{t.style.setProperty("--keyboard-offset","0px"),e&&e()},120)},N=(t,n,e)=>{const o=()=>{n&&x(n,0,e)};t.addEventListener("focusout",o,{once:!0})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let h=0;const k="data-ionic-skip-scroll-assist",J=(t,n,e,o,i,c,a,s=!1)=>{const l=c&&(a===void 0||a.mode===q.None),d=async()=>{if(n.hasAttribute(k)){n.removeAttribute(k);return}Q(t,n,e,o,i,l,s)};return t.addEventListener("focusin",d,!0),()=>{t.removeEventListener("focusin",d,!0)}},K=t=>{document.activeElement!==t&&(t.setAttribute(k,"true"),t.focus())},Q=async(t,n,e,o,i,c,a=!1)=>{if(!e&&!o)return;const s=F(t,e||o,i);if(e&&Math.abs(s.scrollAmount)<4){K(n),c&&e!==null&&(x(e,h),N(n,e,()=>h=0));return}if(g(t,n,!0,s.inputSafeY,a),K(n),H(()=>t.click()),c&&e&&(h=s.scrollPadding,x(e,h)),typeof window<"u"){let l;const d=async()=>{l!==void 0&&clearTimeout(l),window.removeEventListener("ionKeyboardDidShow",f),window.removeEventListener("ionKeyboardDidShow",d),e&&await $(e,0,s.scrollAmount,s.scrollDuration),g(t,n,!1,s.inputSafeY),K(n),c&&N(n,e,()=>h=0)},f=()=>{window.removeEventListener("ionKeyboardDidShow",f),window.addEventListener("ionKeyboardDidShow",d)};if(e){const u=await R(e),m=u.scrollHeight-u.clientHeight;if(s.scrollAmount>m-u.scrollTop){n.type==="password"?(s.scrollAmount+=T,window.addEventListener("ionKeyboardDidShow",f)):window.addEventListener("ionKeyboardDidShow",d),l=setTimeout(d,1e3);return}}d()}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const X=!0,Z=async(t,n)=>{const e=document,o=n==="ios",i=n==="android",c=t.getNumber("keyboardHeight",290),a=t.getBoolean("scrollAssist",!0),s=t.getBoolean("hideCaretOnScroll",o),l=t.getBoolean("inputBlurring",o),d=t.getBoolean("scrollPadding",!0),f=Array.from(e.querySelectorAll("ion-input, ion-textarea")),u=new WeakMap,m=new WeakMap,b=await W.getResizeMode(),E=async r=>{await new Promise(y=>I(r,y));const p=r.shadowRoot||r,w=p.querySelector("input")||p.querySelector("textarea"),v=C(r),P=v?null:r.closest("ion-footer");if(!w)return;if(v&&s&&!u.has(r)){const y=O(r,w,v);u.set(r,y)}if(!(w.type==="date"||w.type==="datetime-local")&&(v||P)&&a&&!m.has(r)){const y=J(r,w,v,P,c,d,b,i);m.set(r,y)}},L=r=>{if(s){const p=u.get(r);p&&p(),u.delete(r)}if(a){const p=m.get(r);p&&p(),m.delete(r)}};l&&X&&U();for(const r of f)E(r);e.addEventListener("ionInputDidLoad",r=>{E(r.detail)}),e.addEventListener("ionInputDidUnload",r=>{L(r.detail)})};export{Z as startInputShims};
