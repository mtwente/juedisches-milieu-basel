import{r as w,h as r,H as E,d as D}from"./p-1bafedb0.js";import{a as x,c as C}from"./p-a533da20.js";import{a as m}from"./p-b4215fed.js";import{c as P}from"./p-b2d007f6.js";import{g as O}from"./p-501d07b5.js";import{q as I,t as A,J as B,S as g,G as $,K as v,T as y}from"./p-16bed4e7.js";const N=":host{display:flex;align-items:center;justify-content:center}:host button{border-radius:8px;-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:12px;padding-inline-end:12px;padding-top:6px;padding-bottom:6px;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:0px;margin-bottom:0px;position:relative;transition:150ms color ease-in-out;border:none;background:var(--ion-color-step-300, #edeef0);color:var(--ion-text-color, #000);font-family:inherit;font-size:inherit;cursor:pointer;appearance:none;overflow:hidden}:host(.time-active) #time-button,:host(.date-active) #date-button{color:var(--ion-color-base)}:host(.datetime-button-disabled){pointer-events:none}:host(.datetime-button-disabled) button{opacity:0.4}",j=":host{display:flex;align-items:center;justify-content:center}:host button{border-radius:8px;-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:12px;padding-inline-end:12px;padding-top:6px;padding-bottom:6px;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:0px;margin-bottom:0px;position:relative;transition:150ms color ease-in-out;border:none;background:var(--ion-color-step-300, #edeef0);color:var(--ion-text-color, #000);font-family:inherit;font-size:inherit;cursor:pointer;appearance:none;overflow:hidden}:host(.time-active) #time-button,:host(.date-active) #date-button{color:var(--ion-color-base)}:host(.datetime-button-disabled){pointer-events:none}:host(.datetime-button-disabled) button{opacity:0.4}",T=class{constructor(s){w(this,s),this.datetimeEl=null,this.overlayEl=null,this.getParsedDateValues=t=>t==null?[]:Array.isArray(t)?t:[t],this.setDateTimeText=()=>{const{datetimeEl:t,datetimePresentation:i}=this;if(!t)return;const{value:a,locale:e,hourCycle:n,preferWheel:d,multiple:l,titleSelectedDatesFormatter:h}=t,c=this.getParsedDateValues(a),o=I(c.length>0?c:[A()])[0],p=B(e,n);switch(this.dateText=this.timeText=void 0,i){case"date-time":case"time-date":const u=y(e,o),b=v(e,o,p);d?this.dateText=`${u} ${b}`:(this.dateText=u,this.timeText=b);break;case"date":if(l&&c.length!==1){let f=`${c.length} days`;if(h!==void 0)try{f=h(c)}catch(k){m("Exception in provided `titleSelectedDatesFormatter`: ",k)}this.dateText=f}else this.dateText=y(e,o);break;case"time":this.timeText=v(e,o,p);break;case"month-year":this.dateText=$(e,o);break;case"month":this.dateText=g(e,o,{month:"long"});break;case"year":this.dateText=g(e,o,{year:"numeric"});break}},this.waitForDatetimeChanges=async()=>{const{datetimeEl:t}=this;return t?new Promise(i=>{x(t,"ionRender",i,{once:!0})}):Promise.resolve()},this.handleDateClick=async t=>{const{datetimeEl:i,datetimePresentation:a}=this;if(!i)return;let e=!1;switch(a){case"date-time":case"time-date":const n=i.presentation!=="date";!i.preferWheel&&n&&(i.presentation="date",e=!0);break}this.selectedButton="date",this.presentOverlay(t,e,this.dateTargetEl)},this.handleTimeClick=t=>{const{datetimeEl:i,datetimePresentation:a}=this;if(!i)return;let e=!1;switch(a){case"date-time":case"time-date":i.presentation!=="time"&&(i.presentation="time",e=!0);break}this.selectedButton="time",this.presentOverlay(t,e,this.timeTargetEl)},this.presentOverlay=async(t,i,a)=>{const{overlayEl:e}=this;e&&(e.tagName==="ION-POPOVER"?(i&&await this.waitForDatetimeChanges(),e.present(Object.assign(Object.assign({},t),{detail:{ionShadowTarget:a}}))):e.present())},this.datetimePresentation="date-time",this.dateText=void 0,this.timeText=void 0,this.datetimeActive=!1,this.selectedButton=void 0,this.color="primary",this.disabled=!1,this.datetime=void 0}async componentWillLoad(){const{datetime:s}=this;if(!s){m("An ID associated with an ion-datetime instance is required for ion-datetime-button to function properly.",this.el);return}const t=this.datetimeEl=document.getElementById(s);if(!t){m(`No ion-datetime instance found for ID '${s}'.`,this.el);return}if(t.tagName!=="ION-DATETIME"){m(`Expected an ion-datetime instance for ID '${s}' but received '${t.tagName.toLowerCase()}' instead.`,t);return}new IntersectionObserver(e=>{const n=e[0];this.datetimeActive=n.isIntersecting},{threshold:.01}).observe(t);const a=this.overlayEl=t.closest("ion-modal, ion-popover");a&&a.classList.add("ion-datetime-button-overlay"),C(t,()=>{const e=this.datetimePresentation=t.presentation||"date-time";switch(this.setDateTimeText(),x(t,"ionValueChange",this.setDateTimeText),e){case"date-time":case"date":case"month-year":case"month":case"year":this.selectedButton="date";break;case"time-date":case"time":this.selectedButton="time";break}})}render(){const{color:s,dateText:t,timeText:i,selectedButton:a,datetimeActive:e,disabled:n}=this,d=O(this);return r(E,{class:P(s,{[d]:!0,[`${a}-active`]:e,"datetime-button-disabled":n})},t&&r("button",{class:"ion-activatable",id:"date-button","aria-expanded":e?"true":"false",onClick:this.handleDateClick,disabled:n,part:"native",ref:l=>this.dateTargetEl=l},r("slot",{name:"date-target"},t),d==="md"&&r("ion-ripple-effect",null)),i&&r("button",{class:"ion-activatable",id:"time-button","aria-expanded":e?"true":"false",onClick:this.handleTimeClick,disabled:n,part:"native",ref:l=>this.timeTargetEl=l},r("slot",{name:"time-target"},i),d==="md"&&r("ion-ripple-effect",null)))}get el(){return D(this)}};T.style={ios:N,md:j};export{T as ion_datetime_button};
