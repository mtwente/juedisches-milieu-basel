{"version":3,"names":["TITLE_GND","BASE_URI_GND","SIZE_GND","FORMAT_OUTPUT_GND","TYPE_PERSON_GND","TYPE_PLACE_GND","TYPE_GROUP_GND","TITLE_WIKIDATA","ENDPOINT_SPARQL_WIKIDATA","QR_SPARQL_WIKIDATA","keywords","type","pageSize","TYPE_PERSON_WIKIDATA","TYPE_PLACE_WIKIDATA","TYPE_GROUP_WIKIDATA","TITLE_IDREF","BASE_URI_IDREF","URL_IDREF","SIZE_IDREF","FORMAT_OUTPUT_IDREF","TYPE_ALL_IDREF","TYPE_PERSON_IDREF","TYPE_PLACE_IDREF","TYPE_GROUP_IDREF","TITLE_GEOVISTORY","ENDPOINT_SPARQL_GEOVISTORY","QR_SPARQL_GEOVISTORY","TYPE_PERSON_GEOVISTORY","TYPE_PLACE_GEOVISTORY","TYPE_GROUP_GEOVISTORY","geovAuthorityLookupExplorerCss","GeovAuthorityLookupExplorer","constructor","hostRef","this","apiAllowedValues","api","undefined","nbOccurencesMax","displaySelectBtn","displayOpenBtn","displayCopyBtn","uriData","title","popoverElement","isPopoverOpen","popoverItem","isLoadingData","validateApiValue","newValue","oldValue","includes","console","error","keywordsHandler","executeAllQueries","typeHandler","getDataGND","trim","queryApiGnd","response","fetch","data","json","map","obj","uri","id","label","getDataWikiData","_a","qrWD","sparqlJson","results","bindings","item","value","name","getDataIdRef","kw","split","join","queryApiIdRef","docs","ppn_z","affcourt_z","getGeovistoryData","word","qrGV","handleClick","handleDismiss","handleSelected","selected","emit","handleCopy","navigator","clipboard","writeText","componentDidLoad","componentDidRender","present","onDidDismiss","then","render","h","Host","ref","el","expand","onClick","href","fill","target","slot","style","display","justifyContent","lines","length","index","class"],"sources":["node_modules/@geovistory/design-system-web/dist/collection/components/geov-authority-lookup-explorer/lib/const.js","node_modules/@geovistory/design-system-web/dist/collection/components/geov-authority-lookup-explorer/geov-authority-lookup-explorer.css?tag=geov-authority-lookup-explorer&encapsulation=shadow","node_modules/@geovistory/design-system-web/dist/collection/components/geov-authority-lookup-explorer/geov-authority-lookup-explorer.js"],"sourcesContent":["// German Authority file (GND)\nexport const TITLE_GND = 'German authority file (GND)';\nexport const BASE_URI_GND = 'https://lobid.org/gnd/search?q=';\nexport const SIZE_GND = '&size=';\nexport const FORMAT_OUTPUT_GND = '&format=json:preferredName';\nexport const TYPE_PERSON_GND = '&filter=type:Person';\nexport const TYPE_PLACE_GND = '&filter=type:PlaceOrGeographicName';\nexport const TYPE_GROUP_GND = '&filter=type:CorporateBody';\n// Wikidata\nexport const TITLE_WIKIDATA = 'Wikidata';\nexport const ENDPOINT_SPARQL_WIKIDATA = 'https://query.wikidata.org/sparql';\nexport const QR_SPARQL_WIKIDATA = (keywords, type, pageSize) => `SELECT DISTINCT * WHERE {\n  SERVICE wikibase:mwapi {\n      bd:serviceParam wikibase:endpoint \"www.wikidata.org\";\n                      wikibase:api \"EntitySearch\";\n                      mwapi:search \"${keywords}\";\n                      mwapi:language \"en\".\n      ?item wikibase:apiOutputItem mwapi:item.\n      ?num wikibase:apiOrdinal true.\n  }\n  ?item rdfs:label ?name filter (lang(?name) = \"en\").\n  ${type}\n} ORDER BY ASC(?num) LIMIT ${pageSize}`;\nexport const TYPE_PERSON_WIKIDATA = '?item wdt:P31 wd:Q5.';\nexport const TYPE_PLACE_WIKIDATA = '?item wdt:P31/wdt:P279* wd:Q82794.';\nexport const TYPE_GROUP_WIKIDATA = '?item wdt:P31/wdt:P279* wd:Q43229.';\n// IdRef\nexport const TITLE_IDREF = 'IdRef';\nexport const BASE_URI_IDREF = 'https://www.idref.fr/Sru/Solr?q=';\nexport const URL_IDREF = 'https://www.idref.fr/';\nexport const SIZE_IDREF = '&start=0&rows=';\nexport const FORMAT_OUTPUT_IDREF = '&indent=on&sort=score%20desc&fl=id,ppn_z,affcourt_z&version=2.2&wt=json';\nexport const TYPE_ALL_IDREF = 'all:';\nexport const TYPE_PERSON_IDREF = 'persname_t:';\nexport const TYPE_PLACE_IDREF = 'geogname_t:';\nexport const TYPE_GROUP_IDREF = 'corpname_t:';\n// Geovistory\nexport const TITLE_GEOVISTORY = 'Geovistory';\nexport const ENDPOINT_SPARQL_GEOVISTORY = 'https://sparql.geovistory.org/api_v1_community_data';\nexport const QR_SPARQL_GEOVISTORY = (keywords, type, pageSize) => `\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX text: <http://jena.apache.org/text#>\nPREFIX ontome: <https://ontome.net/ontology/>\n\nSELECT DISTINCT ?item ?name ?classUri\nWHERE\n{\n  \t(?item) text:query ('${keywords}') .\n  \t?item rdfs:label ?name .\n  \t?item a ?classUri${type} .\n}\nLIMIT ${pageSize}\nOFFSET 0`;\nexport const TYPE_PERSON_GEOVISTORY = ', ontome:c21';\nexport const TYPE_PLACE_GEOVISTORY = ', ontome:c363';\nexport const TYPE_GROUP_GEOVISTORY = ', ontome:c68';\n//# sourceMappingURL=const.js.map\n",":host {\n  display: block;\n}\n\n.colContent {\n  overflow: hidden; /* Hide overflow */\n  text-overflow: ellipsis; /*Add suspension points (...) to indicate cut content */\n  white-space: nowrap; /* Prevents content from going to line */\n}\n\n.containerResponsive {\n  container-type: inline-size;\n}\n\n.colButtons {\n  display: none;\n  text-align: right;\n  white-space: nowrap;\n}\n.colMenu {\n  text-align: right;\n}\n\n@container (width >= 320px) {\n  .colButtons {\n    display: block;\n  }\n\n  .colMenu {\n    display: none;\n  }\n}\n","import { Host, h } from \"@stencil/core\";\nimport { sparqlJson } from \"../../lib/sparqlJson\";\nimport { BASE_URI_GND, FORMAT_OUTPUT_GND, SIZE_GND, TYPE_GROUP_GND, TYPE_PERSON_GND, TYPE_PLACE_GND, QR_SPARQL_WIKIDATA, ENDPOINT_SPARQL_WIKIDATA, TITLE_GND, TITLE_WIKIDATA, TYPE_PERSON_WIKIDATA, TYPE_GROUP_WIKIDATA, TYPE_PLACE_WIKIDATA, TITLE_IDREF, BASE_URI_IDREF, SIZE_IDREF, FORMAT_OUTPUT_IDREF, TYPE_PERSON_IDREF, TYPE_PLACE_IDREF, TYPE_GROUP_IDREF, TYPE_ALL_IDREF, URL_IDREF, TITLE_GEOVISTORY, ENDPOINT_SPARQL_GEOVISTORY, QR_SPARQL_GEOVISTORY, TYPE_PERSON_GEOVISTORY, TYPE_PLACE_GEOVISTORY, TYPE_GROUP_GEOVISTORY, } from \"./lib/const\";\nexport class GeovAuthorityLookupExplorer {\n  constructor() {\n    this.apiAllowedValues = ['gnd', 'wikidata', 'idref', 'geovistory'];\n    this.api = undefined;\n    this.keywords = undefined;\n    this.type = undefined;\n    this.nbOccurencesMax = 5;\n    this.displaySelectBtn = true;\n    this.displayOpenBtn = true;\n    this.displayCopyBtn = false;\n    this.uriData = undefined;\n    this.title = undefined;\n    this.popoverElement = undefined;\n    this.isPopoverOpen = false;\n    this.popoverItem = undefined;\n    this.isLoadingData = false;\n  }\n  validateApiValue(newValue, oldValue) {\n    if (!this.apiAllowedValues.includes(newValue)) {\n      console.error('Invalid value for prop \"api\". It must be one of the allowed values.');\n      this.api = oldValue;\n    }\n  }\n  keywordsHandler(newValue) {\n    this.keywords = newValue;\n    this.executeAllQueries();\n  }\n  typeHandler(newValue) {\n    this.type = newValue;\n    this.executeAllQueries();\n  }\n  async getDataGND() {\n    this.title = TITLE_GND;\n    this.uriData = [];\n    if (this.keywords.trim() != '') {\n      let queryApiGnd = BASE_URI_GND + this.keywords + SIZE_GND + this.nbOccurencesMax + FORMAT_OUTPUT_GND;\n      if (this.type !== null && this.type === 'Person') {\n        queryApiGnd = queryApiGnd + TYPE_PERSON_GND;\n      }\n      if (this.type !== null && this.type === 'Place') {\n        queryApiGnd = queryApiGnd + TYPE_PLACE_GND;\n      }\n      if (this.type !== null && this.type === 'Group') {\n        queryApiGnd = queryApiGnd + TYPE_GROUP_GND;\n      }\n      const response = await fetch(queryApiGnd);\n      const data = await response.json();\n      this.uriData = data.map((obj) => ({ uri: obj.id, label: obj.label }));\n    }\n  }\n  async getDataWikiData() {\n    var _a;\n    this.title = TITLE_WIKIDATA;\n    this.uriData = [];\n    if (this.keywords.trim() != '') {\n      let qrWD = QR_SPARQL_WIKIDATA(this.keywords, '', this.nbOccurencesMax);\n      if (this.type !== null && this.type === 'Person') {\n        qrWD = QR_SPARQL_WIKIDATA(this.keywords, TYPE_PERSON_WIKIDATA, this.nbOccurencesMax);\n      }\n      if (this.type !== null && this.type === 'Place') {\n        qrWD = QR_SPARQL_WIKIDATA(this.keywords, TYPE_PLACE_WIKIDATA, this.nbOccurencesMax);\n      }\n      if (this.type !== null && this.type === 'Group') {\n        qrWD = QR_SPARQL_WIKIDATA(this.keywords, TYPE_GROUP_WIKIDATA, this.nbOccurencesMax);\n      }\n      const data = await sparqlJson(ENDPOINT_SPARQL_WIKIDATA, qrWD);\n      this.uriData = (_a = data === null || data === void 0 ? void 0 : data.results) === null || _a === void 0 ? void 0 : _a.bindings.map((obj) => ({ uri: obj.item.value, label: obj.name.value }));\n    }\n  }\n  async getDataIdRef() {\n    var _a;\n    this.title = TITLE_IDREF;\n    this.uriData = [];\n    if (this.keywords.trim() != '') {\n      const kw = this.keywords.trim().split(' ').join(' AND ');\n      let queryApiIdRef = BASE_URI_IDREF + TYPE_ALL_IDREF + '(' + kw + ')' + SIZE_IDREF + this.nbOccurencesMax + FORMAT_OUTPUT_IDREF;\n      if (this.type !== null && this.type === 'Person') {\n        queryApiIdRef = BASE_URI_IDREF + TYPE_PERSON_IDREF + '(' + kw + ')' + SIZE_IDREF + this.nbOccurencesMax + FORMAT_OUTPUT_IDREF;\n      }\n      if (this.type !== null && this.type === 'Place') {\n        queryApiIdRef = BASE_URI_IDREF + TYPE_PLACE_IDREF + '(' + kw + ')' + SIZE_IDREF + this.nbOccurencesMax + FORMAT_OUTPUT_IDREF;\n      }\n      if (this.type !== null && this.type === 'Group') {\n        queryApiIdRef = BASE_URI_IDREF + TYPE_GROUP_IDREF + '(' + kw + ')' + SIZE_IDREF + this.nbOccurencesMax + FORMAT_OUTPUT_IDREF;\n      }\n      const response = await fetch(queryApiIdRef);\n      const data = await response.json();\n      this.uriData = (_a = data.response.docs) === null || _a === void 0 ? void 0 : _a.map((obj) => ({ uri: URL_IDREF + obj.ppn_z, label: obj.affcourt_z }));\n    }\n  }\n  async getGeovistoryData() {\n    var _a;\n    this.title = TITLE_GEOVISTORY;\n    this.uriData = [];\n    const kw = this.keywords\n      .trim()\n      .split(' ')\n      .map(word => `*${word}*`)\n      .join(' AND ');\n    if (kw.trim() != '') {\n      let qrGV = QR_SPARQL_GEOVISTORY(kw, '', this.nbOccurencesMax);\n      if (this.type !== null && this.type === 'Person') {\n        qrGV = QR_SPARQL_GEOVISTORY(kw, TYPE_PERSON_GEOVISTORY, this.nbOccurencesMax);\n      }\n      if (this.type !== null && this.type === 'Place') {\n        qrGV = QR_SPARQL_GEOVISTORY(kw, TYPE_PLACE_GEOVISTORY, this.nbOccurencesMax);\n      }\n      if (this.type !== null && this.type === 'Group') {\n        qrGV = QR_SPARQL_GEOVISTORY(kw, TYPE_GROUP_GEOVISTORY, this.nbOccurencesMax);\n      }\n      const data = await sparqlJson(ENDPOINT_SPARQL_GEOVISTORY, qrGV);\n      this.uriData = (_a = data.results) === null || _a === void 0 ? void 0 : _a.bindings.map((obj) => ({ uri: obj.item.value, label: obj.name.value }));\n    }\n  }\n  async executeAllQueries() {\n    this.isLoadingData = true;\n    if (this.api == 'gnd') {\n      await this.getDataGND();\n    }\n    if (this.api == 'wikidata') {\n      await this.getDataWikiData();\n    }\n    if (this.api == 'idref') {\n      await this.getDataIdRef();\n    }\n    if (this.api == 'geovistory') {\n      await this.getGeovistoryData();\n    }\n    this.isLoadingData = false;\n  }\n  handleClick(item) {\n    this.isPopoverOpen = true;\n    this.popoverItem = item;\n  }\n  handleDismiss() {\n    this.isPopoverOpen = false;\n  }\n  handleSelected(item) {\n    this.selected.emit({\n      uri: item.uri,\n    });\n  }\n  handleCopy(item) {\n    navigator.clipboard.writeText(item.uri);\n  }\n  async componentDidLoad() {\n    await this.executeAllQueries();\n  }\n  componentDidRender() {\n    if (this.isPopoverOpen) {\n      this.popoverElement.present();\n      this.popoverElement.onDidDismiss().then(() => {\n        this.isPopoverOpen = false;\n      });\n    }\n  }\n  render() {\n    return (h(Host, null, this.isPopoverOpen && (h(\"ion-popover\", { ref: el => (this.popoverElement = el) }, this.displaySelectBtn && (h(\"ion-button\", { expand: \"block\", onClick: () => this.handleSelected(this.popoverItem) }, \"Select\")), this.displayOpenBtn && (h(\"ion-button\", { expand: \"block\", href: this.popoverItem.uri, fill: \"outline\", target: \"_blank\" }, \"Open\", h(\"ion-icon\", { name: \"open-outline\", slot: \"end\" }))), this.displayCopyBtn && (h(\"ion-button\", { expand: \"block\", fill: \"clear\", onClick: () => this.handleCopy(this.popoverItem) }, \"Copy\", h(\"ion-icon\", { name: \"copy-outline\", slot: \"end\" }))), h(\"ion-button\", { expand: \"block\", fill: \"clear\", onClick: () => this.handleDismiss() }, h(\"ion-icon\", { name: \"close-circle-outline\" })))), h(\"ion-card\", null, h(\"ion-card-header\", null, h(\"ion-card-subtitle\", null, this.title)), h(\"ion-card-content\", null, this.isLoadingData && (h(\"div\", { style: { display: 'flex', justifyContent: 'center' } }, h(\"ion-spinner\", null))), !this.isLoadingData && (h(\"ion-list\", { lines: \"full\" }, this.uriData && this.uriData.length === 0 && h(\"ion-item\", { lines: \"none\" }, \"Nothing found\"), this.uriData &&\n      this.uriData.map((item, index) => (h(\"ion-item\", { lines: index === this.uriData.length - 1 ? 'none' : 'full' }, h(\"ion-grid\", { class: \"containerResponsive\" }, h(\"ion-row\", null, h(\"ion-col\", { class: \"colContent\" }, h(\"ion-label\", null, h(\"h2\", null, item.label), h(\"p\", null, item.uri))), h(\"ion-col\", { class: \"colButtons\" }, this.displayCopyBtn && (h(\"ion-button\", { fill: \"clear\", onClick: () => this.handleCopy(item) }, \"Copy\", h(\"ion-icon\", { name: \"copy-outline\", slot: \"end\" }))), this.displayOpenBtn && (h(\"ion-button\", { fill: \"clear\", href: item.uri, target: \"_blank\" }, \"Open\", h(\"ion-icon\", { name: \"open-outline\", slot: \"end\" }))), this.displaySelectBtn && h(\"ion-button\", { onClick: () => this.handleSelected(item) }, \"Select\")), h(\"ion-col\", { class: \"colMenu\" }, h(\"ion-button\", { onClick: () => this.handleClick(item) }, h(\"ion-icon\", { name: \"menu-outline\" })))))))))))), h(\"slot\", null)));\n  }\n  static get is() { return \"geov-authority-lookup-explorer\"; }\n  static get encapsulation() { return \"shadow\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"geov-authority-lookup-explorer.css\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"geov-authority-lookup-explorer.css\"]\n    };\n  }\n  static get properties() {\n    return {\n      \"api\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": true,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"\"\n        },\n        \"attribute\": \"api\",\n        \"reflect\": false\n      },\n      \"keywords\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"\"\n        },\n        \"attribute\": \"keywords\",\n        \"reflect\": false\n      },\n      \"type\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"\"\n        },\n        \"attribute\": \"type\",\n        \"reflect\": false\n      },\n      \"nbOccurencesMax\": {\n        \"type\": \"number\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"number\",\n          \"resolved\": \"number\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"\"\n        },\n        \"attribute\": \"nb-occurences-max\",\n        \"reflect\": false,\n        \"defaultValue\": \"5\"\n      },\n      \"displaySelectBtn\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"\"\n        },\n        \"attribute\": \"display-select-btn\",\n        \"reflect\": false,\n        \"defaultValue\": \"true\"\n      },\n      \"displayOpenBtn\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"\"\n        },\n        \"attribute\": \"display-open-btn\",\n        \"reflect\": false,\n        \"defaultValue\": \"true\"\n      },\n      \"displayCopyBtn\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"\"\n        },\n        \"attribute\": \"display-copy-btn\",\n        \"reflect\": false,\n        \"defaultValue\": \"false\"\n      }\n    };\n  }\n  static get states() {\n    return {\n      \"uriData\": {},\n      \"title\": {},\n      \"popoverElement\": {},\n      \"isPopoverOpen\": {},\n      \"popoverItem\": {},\n      \"isLoadingData\": {}\n    };\n  }\n  static get events() {\n    return [{\n        \"method\": \"selected\",\n        \"name\": \"selected\",\n        \"bubbles\": false,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"Event emitted when the select button has been clicked.\\nThe event does not bubble up through the DOM.\"\n        },\n        \"complexType\": {\n          \"original\": \"ItemSelectedEvent\",\n          \"resolved\": \"ItemSelectedEvent\",\n          \"references\": {\n            \"ItemSelectedEvent\": {\n              \"location\": \"local\",\n              \"path\": \"/Users/admin/Gorg/design-system/packages/design-system-web/src/components/geov-authority-lookup-explorer/geov-authority-lookup-explorer.tsx\",\n              \"id\": \"src/components/geov-authority-lookup-explorer/geov-authority-lookup-explorer.tsx::ItemSelectedEvent\"\n            }\n          }\n        }\n      }];\n  }\n  static get watchers() {\n    return [{\n        \"propName\": \"api\",\n        \"methodName\": \"validateApiValue\"\n      }, {\n        \"propName\": \"keywords\",\n        \"methodName\": \"keywordsHandler\"\n      }, {\n        \"propName\": \"type\",\n        \"methodName\": \"typeHandler\"\n      }];\n  }\n}\n//# sourceMappingURL=geov-authority-lookup-explorer.js.map\n"],"mappings":"6FACO,MAAMA,EAAY,8BAClB,MAAMC,EAAe,kCACrB,MAAMC,EAAW,SACjB,MAAMC,EAAoB,6BAC1B,MAAMC,EAAkB,sBACxB,MAAMC,EAAiB,qCACvB,MAAMC,EAAiB,6BAEvB,MAAMC,EAAiB,WACvB,MAAMC,EAA2B,oCACjC,MAAMC,EAAqB,CAACC,EAAUC,EAAMC,IAAa,+MAI1BF,wMAMlCC,iCACyBC,IACtB,MAAMC,EAAuB,uBAC7B,MAAMC,EAAsB,qCAC5B,MAAMC,EAAsB,qCAE5B,MAAMC,EAAc,QACpB,MAAMC,EAAiB,mCACvB,MAAMC,EAAY,wBAClB,MAAMC,EAAa,iBACnB,MAAMC,EAAsB,0EAC5B,MAAMC,EAAiB,OACvB,MAAMC,EAAoB,cAC1B,MAAMC,EAAmB,cACzB,MAAMC,EAAmB,cAEzB,MAAMC,EAAmB,aACzB,MAAMC,EAA6B,sDACnC,MAAMC,EAAuB,CAACjB,EAAUC,EAAMC,IAAa,mOAQxCF,6DAEJC,iBAEdC,cAED,MAAMgB,EAAyB,eAC/B,MAAMC,EAAwB,gBAC9B,MAAMC,EAAwB,eCvDrC,MAAMC,EAAiC,oiB,MCG1BC,EAA2B,MACtC,WAAAC,CAAAC,G,6CACEC,KAAKC,iBAAmB,CAAC,MAAO,WAAY,QAAS,cACrDD,KAAKE,IAAMC,UACXH,KAAKzB,SAAW4B,UAChBH,KAAKxB,KAAO2B,UACZH,KAAKI,gBAAkB,EACvBJ,KAAKK,iBAAmB,KACxBL,KAAKM,eAAiB,KACtBN,KAAKO,eAAiB,MACtBP,KAAKQ,QAAUL,UACfH,KAAKS,MAAQN,UACbH,KAAKU,eAAiBP,UACtBH,KAAKW,cAAgB,MACrBX,KAAKY,YAAcT,UACnBH,KAAKa,cAAgB,K,CAEvB,gBAAAC,CAAiBC,EAAUC,GACzB,IAAKhB,KAAKC,iBAAiBgB,SAASF,GAAW,CAC7CG,QAAQC,MAAM,uEACdnB,KAAKE,IAAMc,C,EAGf,eAAAI,CAAgBL,GACdf,KAAKzB,SAAWwC,EAChBf,KAAKqB,mB,CAEP,WAAAC,CAAYP,GACVf,KAAKxB,KAAOuC,EACZf,KAAKqB,mB,CAEP,gBAAME,GACJvB,KAAKS,MAAQ5C,EACbmC,KAAKQ,QAAU,GACf,GAAIR,KAAKzB,SAASiD,QAAU,GAAI,CAC9B,IAAIC,EAAc3D,EAAekC,KAAKzB,SAAWR,EAAWiC,KAAKI,gBAAkBpC,EACnF,GAAIgC,KAAKxB,OAAS,MAAQwB,KAAKxB,OAAS,SAAU,CAChDiD,EAAcA,EAAcxD,C,CAE9B,GAAI+B,KAAKxB,OAAS,MAAQwB,KAAKxB,OAAS,QAAS,CAC/CiD,EAAcA,EAAcvD,C,CAE9B,GAAI8B,KAAKxB,OAAS,MAAQwB,KAAKxB,OAAS,QAAS,CAC/CiD,EAAcA,EAActD,C,CAE9B,MAAMuD,QAAiBC,MAAMF,GAC7B,MAAMG,QAAaF,EAASG,OAC5B7B,KAAKQ,QAAUoB,EAAKE,KAAKC,IAAG,CAAQC,IAAKD,EAAIE,GAAIC,MAAOH,EAAIG,S,EAGhE,qBAAMC,GACJ,IAAIC,EACJpC,KAAKS,MAAQrC,EACb4B,KAAKQ,QAAU,GACf,GAAIR,KAAKzB,SAASiD,QAAU,GAAI,CAC9B,IAAIa,EAAO/D,EAAmB0B,KAAKzB,SAAU,GAAIyB,KAAKI,iBACtD,GAAIJ,KAAKxB,OAAS,MAAQwB,KAAKxB,OAAS,SAAU,CAChD6D,EAAO/D,EAAmB0B,KAAKzB,SAAUG,EAAsBsB,KAAKI,gB,CAEtE,GAAIJ,KAAKxB,OAAS,MAAQwB,KAAKxB,OAAS,QAAS,CAC/C6D,EAAO/D,EAAmB0B,KAAKzB,SAAUI,EAAqBqB,KAAKI,gB,CAErE,GAAIJ,KAAKxB,OAAS,MAAQwB,KAAKxB,OAAS,QAAS,CAC/C6D,EAAO/D,EAAmB0B,KAAKzB,SAAUK,EAAqBoB,KAAKI,gB,CAErE,MAAMwB,QAAaU,EAAWjE,EAA0BgE,GACxDrC,KAAKQ,SAAW4B,EAAKR,IAAS,MAAQA,SAAc,OAAS,EAAIA,EAAKW,WAAa,MAAQH,SAAY,OAAS,EAAIA,EAAGI,SAASV,KAAKC,IAAG,CAAQC,IAAKD,EAAIU,KAAKC,MAAOR,MAAOH,EAAIY,KAAKD,S,EAGzL,kBAAME,GACJ,IAAIR,EACJpC,KAAKS,MAAQ5B,EACbmB,KAAKQ,QAAU,GACf,GAAIR,KAAKzB,SAASiD,QAAU,GAAI,CAC9B,MAAMqB,EAAK7C,KAAKzB,SAASiD,OAAOsB,MAAM,KAAKC,KAAK,SAChD,IAAIC,EAAgBlE,EAAiBI,EAAiB,IAAM2D,EAAK,IAAM7D,EAAagB,KAAKI,gBAAkBnB,EAC3G,GAAIe,KAAKxB,OAAS,MAAQwB,KAAKxB,OAAS,SAAU,CAChDwE,EAAgBlE,EAAiBK,EAAoB,IAAM0D,EAAK,IAAM7D,EAAagB,KAAKI,gBAAkBnB,C,CAE5G,GAAIe,KAAKxB,OAAS,MAAQwB,KAAKxB,OAAS,QAAS,CAC/CwE,EAAgBlE,EAAiBM,EAAmB,IAAMyD,EAAK,IAAM7D,EAAagB,KAAKI,gBAAkBnB,C,CAE3G,GAAIe,KAAKxB,OAAS,MAAQwB,KAAKxB,OAAS,QAAS,CAC/CwE,EAAgBlE,EAAiBO,EAAmB,IAAMwD,EAAK,IAAM7D,EAAagB,KAAKI,gBAAkBnB,C,CAE3G,MAAMyC,QAAiBC,MAAMqB,GAC7B,MAAMpB,QAAaF,EAASG,OAC5B7B,KAAKQ,SAAW4B,EAAKR,EAAKF,SAASuB,QAAU,MAAQb,SAAY,OAAS,EAAIA,EAAGN,KAAKC,IAAG,CAAQC,IAAKjD,EAAYgD,EAAImB,MAAOhB,MAAOH,EAAIoB,c,EAG5I,uBAAMC,GACJ,IAAIhB,EACJpC,KAAKS,MAAQnB,EACbU,KAAKQ,QAAU,GACf,MAAMqC,EAAK7C,KAAKzB,SACbiD,OACAsB,MAAM,KACNhB,KAAIuB,GAAQ,IAAIA,OAChBN,KAAK,SACR,GAAIF,EAAGrB,QAAU,GAAI,CACnB,IAAI8B,EAAO9D,EAAqBqD,EAAI,GAAI7C,KAAKI,iBAC7C,GAAIJ,KAAKxB,OAAS,MAAQwB,KAAKxB,OAAS,SAAU,CAChD8E,EAAO9D,EAAqBqD,EAAIpD,EAAwBO,KAAKI,gB,CAE/D,GAAIJ,KAAKxB,OAAS,MAAQwB,KAAKxB,OAAS,QAAS,CAC/C8E,EAAO9D,EAAqBqD,EAAInD,EAAuBM,KAAKI,gB,CAE9D,GAAIJ,KAAKxB,OAAS,MAAQwB,KAAKxB,OAAS,QAAS,CAC/C8E,EAAO9D,EAAqBqD,EAAIlD,EAAuBK,KAAKI,gB,CAE9D,MAAMwB,QAAaU,EAAW/C,EAA4B+D,GAC1DtD,KAAKQ,SAAW4B,EAAKR,EAAKW,WAAa,MAAQH,SAAY,OAAS,EAAIA,EAAGI,SAASV,KAAKC,IAAG,CAAQC,IAAKD,EAAIU,KAAKC,MAAOR,MAAOH,EAAIY,KAAKD,S,EAG7I,uBAAMrB,GACJrB,KAAKa,cAAgB,KACrB,GAAIb,KAAKE,KAAO,MAAO,OACfF,KAAKuB,Y,CAEb,GAAIvB,KAAKE,KAAO,WAAY,OACpBF,KAAKmC,iB,CAEb,GAAInC,KAAKE,KAAO,QAAS,OACjBF,KAAK4C,c,CAEb,GAAI5C,KAAKE,KAAO,aAAc,OACtBF,KAAKoD,mB,CAEbpD,KAAKa,cAAgB,K,CAEvB,WAAA0C,CAAYd,GACVzC,KAAKW,cAAgB,KACrBX,KAAKY,YAAc6B,C,CAErB,aAAAe,GACExD,KAAKW,cAAgB,K,CAEvB,cAAA8C,CAAehB,GACbzC,KAAK0D,SAASC,KAAK,CACjB3B,IAAKS,EAAKT,K,CAGd,UAAA4B,CAAWnB,GACToB,UAAUC,UAAUC,UAAUtB,EAAKT,I,CAErC,sBAAMgC,SACEhE,KAAKqB,mB,CAEb,kBAAA4C,GACE,GAAIjE,KAAKW,cAAe,CACtBX,KAAKU,eAAewD,UACpBlE,KAAKU,eAAeyD,eAAeC,MAAK,KACtCpE,KAAKW,cAAgB,KAAK,G,EAIhC,MAAA0D,GACE,OAAQC,EAAEC,EAAM,KAAMvE,KAAKW,eAAkB2D,EAAE,cAAe,CAAEE,IAAKC,GAAOzE,KAAKU,eAAiB+D,GAAOzE,KAAKK,kBAAqBiE,EAAE,aAAc,CAAEI,OAAQ,QAASC,QAAS,IAAM3E,KAAKyD,eAAezD,KAAKY,cAAgB,UAAYZ,KAAKM,gBAAmBgE,EAAE,aAAc,CAAEI,OAAQ,QAASE,KAAM5E,KAAKY,YAAYoB,IAAK6C,KAAM,UAAWC,OAAQ,UAAY,OAAQR,EAAE,WAAY,CAAE3B,KAAM,eAAgBoC,KAAM,SAAY/E,KAAKO,gBAAmB+D,EAAE,aAAc,CAAEI,OAAQ,QAASG,KAAM,QAASF,QAAS,IAAM3E,KAAK4D,WAAW5D,KAAKY,cAAgB,OAAQ0D,EAAE,WAAY,CAAE3B,KAAM,eAAgBoC,KAAM,SAAYT,EAAE,aAAc,CAAEI,OAAQ,QAASG,KAAM,QAASF,QAAS,IAAM3E,KAAKwD,iBAAmBc,EAAE,WAAY,CAAE3B,KAAM,2BAA8B2B,EAAE,WAAY,KAAMA,EAAE,kBAAmB,KAAMA,EAAE,oBAAqB,KAAMtE,KAAKS,QAAS6D,EAAE,mBAAoB,KAAMtE,KAAKa,eAAkByD,EAAE,MAAO,CAAEU,MAAO,CAAEC,QAAS,OAAQC,eAAgB,WAAcZ,EAAE,cAAe,QAAUtE,KAAKa,eAAkByD,EAAE,WAAY,CAAEa,MAAO,QAAUnF,KAAKQ,SAAWR,KAAKQ,QAAQ4E,SAAW,GAAKd,EAAE,WAAY,CAAEa,MAAO,QAAU,iBAAkBnF,KAAKQ,SACvnCR,KAAKQ,QAAQsB,KAAI,CAACW,EAAM4C,IAAWf,EAAE,WAAY,CAAEa,MAAOE,IAAUrF,KAAKQ,QAAQ4E,OAAS,EAAI,OAAS,QAAUd,EAAE,WAAY,CAAEgB,MAAO,uBAAyBhB,EAAE,UAAW,KAAMA,EAAE,UAAW,CAAEgB,MAAO,cAAgBhB,EAAE,YAAa,KAAMA,EAAE,KAAM,KAAM7B,EAAKP,OAAQoC,EAAE,IAAK,KAAM7B,EAAKT,OAAQsC,EAAE,UAAW,CAAEgB,MAAO,cAAgBtF,KAAKO,gBAAmB+D,EAAE,aAAc,CAAEO,KAAM,QAASF,QAAS,IAAM3E,KAAK4D,WAAWnB,IAAS,OAAQ6B,EAAE,WAAY,CAAE3B,KAAM,eAAgBoC,KAAM,SAAY/E,KAAKM,gBAAmBgE,EAAE,aAAc,CAAEO,KAAM,QAASD,KAAMnC,EAAKT,IAAK8C,OAAQ,UAAY,OAAQR,EAAE,WAAY,CAAE3B,KAAM,eAAgBoC,KAAM,SAAY/E,KAAKK,kBAAoBiE,EAAE,aAAc,CAAEK,QAAS,IAAM3E,KAAKyD,eAAehB,IAAS,WAAY6B,EAAE,UAAW,CAAEgB,MAAO,WAAahB,EAAE,aAAc,CAAEK,QAAS,IAAM3E,KAAKuD,YAAYd,IAAS6B,EAAE,WAAY,CAAE3B,KAAM,2BAA8B2B,EAAE,OAAQ,M"}