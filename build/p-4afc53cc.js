import{c as n,a as r,b as t}from"./p-7d5dbd9a.js";import{f as e,i}from"./p-1bafedb0.js";import{v as o}from"./p-e25dc8ec.js";class a{get ionRouterElement(){return this._ionRouterElement}set ionRouterElement(n){this._ionRouterElement=n}}const u=new a;var f=n((function(n,e){
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
(function(r){{n.exports=r()}})((function(){return function n(r,e,i){function o(u,f){if(!e[u]){if(!r[u]){var c=typeof t=="function"&&t;if(!f&&c)return c(u,!0);if(a)return a(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var v=e[u]={exports:{}};r[u][0].call(v.exports,(function(n){var t=r[u][1][n];return o(t?t:n)}),v,v.exports,n,r,e,i)}return e[u].exports}var a=typeof t=="function"&&t;for(var u=0;u<i.length;u++)o(i[u]);return o}({1:[function(n,t,e){(function(n){var r=n.MutationObserver||n.WebKitMutationObserver;var e;{if(r){var i=0;var o=new r(s);var a=n.document.createTextNode("");o.observe(a,{characterData:true});e=function(){a.data=i=++i%2}}else if(!n.setImmediate&&typeof n.MessageChannel!=="undefined"){var u=new n.MessageChannel;u.port1.onmessage=s;e=function(){u.port2.postMessage(0)}}else if("document"in n&&"onreadystatechange"in n.document.createElement("script")){e=function(){var r=n.document.createElement("script");r.onreadystatechange=function(){s();r.onreadystatechange=null;r.parentNode.removeChild(r);r=null};n.document.documentElement.appendChild(r)}}else{e=function(){setTimeout(s,0)}}}var f;var c=[];function s(){f=true;var n,r;var t=c.length;while(t){r=c;c=[];n=-1;while(++n<t){r[n]()}t=c.length}f=false}t.exports=v;function v(n){if(c.push(n)===1&&!f){e()}}}).call(this,typeof r!=="undefined"?r:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(n,r,t){var e=n(1);function i(){}var o={};var a=["REJECTED"];var u=["FULFILLED"];var f=["PENDING"];r.exports=c;function c(n){if(typeof n!=="function"){throw new TypeError("resolver must be a function")}this.state=f;this.queue=[];this.outcome=void 0;if(n!==i){d(this,n)}}c.prototype["catch"]=function(n){return this.then(null,n)};c.prototype.then=function(n,r){if(typeof n!=="function"&&this.state===u||typeof r!=="function"&&this.state===a){return this}var t=new this.constructor(i);if(this.state!==f){var e=this.state===u?n:r;v(t,e,this.outcome)}else{this.queue.push(new s(t,n,r))}return t};function s(n,r,t){this.promise=n;if(typeof r==="function"){this.onFulfilled=r;this.callFulfilled=this.otherCallFulfilled}if(typeof t==="function"){this.onRejected=t;this.callRejected=this.otherCallRejected}}s.prototype.callFulfilled=function(n){o.resolve(this.promise,n)};s.prototype.otherCallFulfilled=function(n){v(this.promise,this.onFulfilled,n)};s.prototype.callRejected=function(n){o.reject(this.promise,n)};s.prototype.otherCallRejected=function(n){v(this.promise,this.onRejected,n)};function v(n,r,t){e((function(){var e;try{e=r(t)}catch(r){return o.reject(n,r)}if(e===n){o.reject(n,new TypeError("Cannot resolve promise with itself"))}else{o.resolve(n,e)}}))}o.resolve=function(n,r){var t=h(l,r);if(t.status==="error"){return o.reject(n,t.value)}var e=t.value;if(e){d(n,e)}else{n.state=u;n.outcome=r;var i=-1;var a=n.queue.length;while(++i<a){n.queue[i].callFulfilled(r)}}return n};o.reject=function(n,r){n.state=a;n.outcome=r;var t=-1;var e=n.queue.length;while(++t<e){n.queue[t].callRejected(r)}return n};function l(n){var r=n&&n.then;if(n&&(typeof n==="object"||typeof n==="function")&&typeof r==="function"){return function t(){r.apply(n,arguments)}}}function d(n,r){var t=false;function e(r){if(t){return}t=true;o.reject(n,r)}function i(r){if(t){return}t=true;o.resolve(n,r)}function a(){r(i,e)}var u=h(a);if(u.status==="error"){e(u.value)}}function h(n,r){var t={};try{t.value=n(r);t.status="success"}catch(n){t.status="error";t.value=n}return t}c.resolve=y;function y(n){if(n instanceof this){return n}return o.resolve(new this(i),n)}c.reject=p;function p(n){var r=new this(i);return o.reject(r,n)}c.all=w;function w(n){var r=this;if(Object.prototype.toString.call(n)!=="[object Array]"){return this.reject(new TypeError("must be an array"))}var t=n.length;var e=false;if(!t){return this.resolve([])}var a=new Array(t);var u=0;var f=-1;var c=new this(i);while(++f<t){s(n[f],f)}return c;function s(n,i){r.resolve(n).then(f,(function(n){if(!e){e=true;o.reject(c,n)}}));function f(n){a[i]=n;if(++u===t&&!e){e=true;o.resolve(c,a)}}}}c.race=b;function b(n){var r=this;if(Object.prototype.toString.call(n)!=="[object Array]"){return this.reject(new TypeError("must be an array"))}var t=n.length;var e=false;if(!t){return this.resolve([])}var a=-1;var u=new this(i);while(++a<t){f(n[a])}return u;function f(n){r.resolve(n).then((function(n){if(!e){e=true;o.resolve(u,n)}}),(function(n){if(!e){e=true;o.reject(u,n)}}))}}},{1:1}],3:[function(n,t,e){(function(r){if(typeof r.Promise!=="function"){r.Promise=n(2)}}).call(this,typeof r!=="undefined"?r:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{2:2}],4:[function(n,r,t){var e=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol==="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function i(n,r){if(!(n instanceof r)){throw new TypeError("Cannot call a class as a function")}}function o(){try{if(typeof indexedDB!=="undefined"){return indexedDB}if(typeof webkitIndexedDB!=="undefined"){return webkitIndexedDB}if(typeof mozIndexedDB!=="undefined"){return mozIndexedDB}if(typeof OIndexedDB!=="undefined"){return OIndexedDB}if(typeof msIndexedDB!=="undefined"){return msIndexedDB}}catch(n){return}}var a=o();function u(){try{if(!a||!a.open){return false}var n=typeof openDatabase!=="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform);var r=typeof fetch==="function"&&fetch.toString().indexOf("[native code")!==-1;return(!n||r)&&typeof indexedDB!=="undefined"&&typeof IDBKeyRange!=="undefined"}catch(n){return false}}function f(n,r){n=n||[];r=r||{};try{return new Blob(n,r)}catch(o){if(o.name!=="TypeError"){throw o}var t=typeof BlobBuilder!=="undefined"?BlobBuilder:typeof MSBlobBuilder!=="undefined"?MSBlobBuilder:typeof MozBlobBuilder!=="undefined"?MozBlobBuilder:WebKitBlobBuilder;var e=new t;for(var i=0;i<n.length;i+=1){e.append(n[i])}return e.getBlob(r.type)}}if(typeof Promise==="undefined"){n(3)}var c=Promise;function s(n,r){if(r){n.then((function(n){r(null,n)}),(function(n){r(n)}))}}function v(n,r,t){if(typeof r==="function"){n.then(r)}if(typeof t==="function"){n["catch"](t)}}function l(n){if(typeof n!=="string"){console.warn(n+" used as a key, but it is not a string.");n=String(n)}return n}function d(){if(arguments.length&&typeof arguments[arguments.length-1]==="function"){return arguments[arguments.length-1]}}var h="local-forage-detect-blob-support";var y=void 0;var p={};var w=Object.prototype.toString;var b="readonly";var g="readwrite";function m(n){var r=n.length;var t=new ArrayBuffer(r);var e=new Uint8Array(t);for(var i=0;i<r;i++){e[i]=n.charCodeAt(i)}return t}function E(n){return new c((function(r){var t=n.transaction(h,g);var e=f([""]);t.objectStore(h).put(e,"key");t.onabort=function(n){n.preventDefault();n.stopPropagation();r(false)};t.oncomplete=function(){var n=navigator.userAgent.match(/Chrome\/(\d+)/);var t=navigator.userAgent.match(/Edge\//);r(t||!n||parseInt(n[1],10)>=43)}}))["catch"]((function(){return false}))}function S(n){if(typeof y==="boolean"){return c.resolve(y)}return E(n).then((function(n){y=n;return y}))}function I(n){var r=p[n.name];var t={};t.promise=new c((function(n,r){t.resolve=n;t.reject=r}));r.deferredOperations.push(t);if(!r.dbReady){r.dbReady=t.promise}else{r.dbReady=r.dbReady.then((function(){return t.promise}))}}function k(n){var r=p[n.name];var t=r.deferredOperations.pop();if(t){t.resolve();return t.promise}}function A(n,r){var t=p[n.name];var e=t.deferredOperations.pop();if(e){e.reject(r);return e.promise}}function B(n,r){return new c((function(t,e){p[n.name]=p[n.name]||M();if(n.db){if(r){I(n);n.db.close()}else{return t(n.db)}}var i=[n.name];if(r){i.push(n.version)}var o=a.open.apply(a,i);if(r){o.onupgradeneeded=function(r){var t=o.result;try{t.createObjectStore(n.storeName);if(r.oldVersion<=1){t.createObjectStore(h)}}catch(t){if(t.name==="ConstraintError"){console.warn('The database "'+n.name+'"'+" has been upgraded from version "+r.oldVersion+" to version "+r.newVersion+', but the storage "'+n.storeName+'" already exists.')}else{throw t}}}}o.onerror=function(n){n.preventDefault();e(o.error)};o.onsuccess=function(){var r=o.result;r.onversionchange=function(n){n.target.close()};t(r);k(n)}}))}function O(n){return B(n,false)}function T(n){return B(n,true)}function _(n,r){if(!n.db){return true}var t=!n.db.objectStoreNames.contains(n.storeName);var e=n.version<n.db.version;var i=n.version>n.db.version;if(e){if(n.version!==r){console.warn('The database "'+n.name+'"'+" can't be downgraded from version "+n.db.version+" to version "+n.version+".")}n.version=n.db.version}if(i||t){if(t){var o=n.db.version+1;if(o>n.version){n.version=o}}return true}return false}function D(n){return new c((function(r,t){var e=new FileReader;e.onerror=t;e.onloadend=function(t){var e=btoa(t.target.result||"");r({__local_forage_encoded_blob:true,data:e,type:n.type})};e.readAsBinaryString(n)}))}function R(n){var r=m(atob(n.data));return f([r],{type:n.type})}function j(n){return n&&n.__local_forage_encoded_blob}function N(n){var r=this;var t=r._initReady().then((function(){var n=p[r._dbInfo.name];if(n&&n.dbReady){return n.dbReady}}));v(t,n,n);return t}function C(n){I(n);var r=p[n.name];var t=r.forages;for(var e=0;e<t.length;e++){var i=t[e];if(i._dbInfo.db){i._dbInfo.db.close();i._dbInfo.db=null}}n.db=null;return O(n).then((function(r){n.db=r;if(_(n)){return T(n)}return r})).then((function(e){n.db=r.db=e;for(var i=0;i<t.length;i++){t[i]._dbInfo.db=e}}))["catch"]((function(r){A(n,r);throw r}))}function L(n,r,t,e){if(e===undefined){e=1}try{var i=n.db.transaction(n.storeName,r);t(null,i)}catch(i){if(e>0&&(!n.db||i.name==="InvalidStateError"||i.name==="NotFoundError")){return c.resolve().then((function(){if(!n.db||i.name==="NotFoundError"&&!n.db.objectStoreNames.contains(n.storeName)&&n.version<=n.db.version){if(n.db){n.version=n.db.version+1}return T(n)}})).then((function(){return C(n).then((function(){L(n,r,t,e-1)}))}))["catch"](t)}t(i)}}function M(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function F(n){var r=this;var t={db:null};if(n){for(var e in n){t[e]=n[e]}}var i=p[t.name];if(!i){i=M();p[t.name]=i}i.forages.push(r);if(!r._initReady){r._initReady=r.ready;r.ready=N}var o=[];function a(){return c.resolve()}for(var u=0;u<i.forages.length;u++){var f=i.forages[u];if(f!==r){o.push(f._initReady()["catch"](a))}}var s=i.forages.slice(0);return c.all(o).then((function(){t.db=i.db;return O(t)})).then((function(n){t.db=n;if(_(t,r._defaultConfig.version)){return T(t)}return n})).then((function(n){t.db=i.db=n;r._dbInfo=t;for(var e=0;e<s.length;e++){var o=s[e];if(o!==r){o._dbInfo.db=t.db;o._dbInfo.version=t.version}}}))}function U(n,r){var t=this;n=l(n);var e=new c((function(r,e){t.ready().then((function(){L(t._dbInfo,b,(function(i,o){if(i){return e(i)}try{var a=o.objectStore(t._dbInfo.storeName);var u=a.get(n);u.onsuccess=function(){var n=u.result;if(n===undefined){n=null}if(j(n)){n=R(n)}r(n)};u.onerror=function(){e(u.error)}}catch(n){e(n)}}))}))["catch"](e)}));s(e,r);return e}function x(n,r){var t=this;var e=new c((function(r,e){t.ready().then((function(){L(t._dbInfo,b,(function(i,o){if(i){return e(i)}try{var a=o.objectStore(t._dbInfo.storeName);var u=a.openCursor();var f=1;u.onsuccess=function(){var t=u.result;if(t){var e=t.value;if(j(e)){e=R(e)}var i=n(e,t.key,f++);if(i!==void 0){r(i)}else{t["continue"]()}}else{r()}};u.onerror=function(){e(u.error)}}catch(n){e(n)}}))}))["catch"](e)}));s(e,r);return e}function P(n,r,t){var e=this;n=l(n);var i=new c((function(t,i){var o;e.ready().then((function(){o=e._dbInfo;if(w.call(r)==="[object Blob]"){return S(o.db).then((function(n){if(n){return r}return D(r)}))}return r})).then((function(r){L(e._dbInfo,g,(function(o,a){if(o){return i(o)}try{var u=a.objectStore(e._dbInfo.storeName);if(r===null){r=undefined}var f=u.put(r,n);a.oncomplete=function(){if(r===undefined){r=null}t(r)};a.onabort=a.onerror=function(){var n=f.error?f.error:f.transaction.error;i(n)}}catch(n){i(n)}}))}))["catch"](i)}));s(i,t);return i}function W(n,r){var t=this;n=l(n);var e=new c((function(r,e){t.ready().then((function(){L(t._dbInfo,g,(function(i,o){if(i){return e(i)}try{var a=o.objectStore(t._dbInfo.storeName);var u=a["delete"](n);o.oncomplete=function(){r()};o.onerror=function(){e(u.error)};o.onabort=function(){var n=u.error?u.error:u.transaction.error;e(n)}}catch(n){e(n)}}))}))["catch"](e)}));s(e,r);return e}function z(n){var r=this;var t=new c((function(n,t){r.ready().then((function(){L(r._dbInfo,g,(function(e,i){if(e){return t(e)}try{var o=i.objectStore(r._dbInfo.storeName);var a=o.clear();i.oncomplete=function(){n()};i.onabort=i.onerror=function(){var n=a.error?a.error:a.transaction.error;t(n)}}catch(n){t(n)}}))}))["catch"](t)}));s(t,n);return t}function K(n){var r=this;var t=new c((function(n,t){r.ready().then((function(){L(r._dbInfo,b,(function(e,i){if(e){return t(e)}try{var o=i.objectStore(r._dbInfo.storeName);var a=o.count();a.onsuccess=function(){n(a.result)};a.onerror=function(){t(a.error)}}catch(n){t(n)}}))}))["catch"](t)}));s(t,n);return t}function H(n,r){var t=this;var e=new c((function(r,e){if(n<0){r(null);return}t.ready().then((function(){L(t._dbInfo,b,(function(i,o){if(i){return e(i)}try{var a=o.objectStore(t._dbInfo.storeName);var u=false;var f=a.openKeyCursor();f.onsuccess=function(){var t=f.result;if(!t){r(null);return}if(n===0){r(t.key)}else{if(!u){u=true;t.advance(n)}else{r(t.key)}}};f.onerror=function(){e(f.error)}}catch(n){e(n)}}))}))["catch"](e)}));s(e,r);return e}function J(n){var r=this;var t=new c((function(n,t){r.ready().then((function(){L(r._dbInfo,b,(function(e,i){if(e){return t(e)}try{var o=i.objectStore(r._dbInfo.storeName);var a=o.openKeyCursor();var u=[];a.onsuccess=function(){var r=a.result;if(!r){n(u);return}u.push(r.key);r["continue"]()};a.onerror=function(){t(a.error)}}catch(n){t(n)}}))}))["catch"](t)}));s(t,n);return t}function Q(n,r){r=d.apply(this,arguments);var t=this.config();n=typeof n!=="function"&&n||{};if(!n.name){n.name=n.name||t.name;n.storeName=n.storeName||t.storeName}var e=this;var i;if(!n.name){i=c.reject("Invalid arguments")}else{var o=n.name===t.name&&e._dbInfo.db;var u=o?c.resolve(e._dbInfo.db):O(n).then((function(r){var t=p[n.name];var e=t.forages;t.db=r;for(var i=0;i<e.length;i++){e[i]._dbInfo.db=r}return r}));if(!n.storeName){i=u.then((function(r){I(n);var t=p[n.name];var e=t.forages;r.close();for(var i=0;i<e.length;i++){var o=e[i];o._dbInfo.db=null}var u=new c((function(r,t){var e=a.deleteDatabase(n.name);e.onerror=function(){var n=e.result;if(n){n.close()}t(e.error)};e.onblocked=function(){console.warn('dropInstance blocked for database "'+n.name+'" until all open connections are closed')};e.onsuccess=function(){var n=e.result;if(n){n.close()}r(n)}}));return u.then((function(n){t.db=n;for(var r=0;r<e.length;r++){var i=e[r];k(i._dbInfo)}}))["catch"]((function(r){(A(n,r)||c.resolve())["catch"]((function(){}));throw r}))}))}else{i=u.then((function(r){if(!r.objectStoreNames.contains(n.storeName)){return}var t=r.version+1;I(n);var e=p[n.name];var i=e.forages;r.close();for(var o=0;o<i.length;o++){var u=i[o];u._dbInfo.db=null;u._dbInfo.version=t}var f=new c((function(r,e){var i=a.open(n.name,t);i.onerror=function(n){var r=i.result;r.close();e(n)};i.onupgradeneeded=function(){var r=i.result;r.deleteObjectStore(n.storeName)};i.onsuccess=function(){var n=i.result;n.close();r(n)}}));return f.then((function(n){e.db=n;for(var r=0;r<i.length;r++){var t=i[r];t._dbInfo.db=n;k(t._dbInfo)}}))["catch"]((function(r){(A(n,r)||c.resolve())["catch"]((function(){}));throw r}))}))}}s(i,r);return i}var q={_driver:"asyncStorage",_initStorage:F,_support:u(),iterate:x,getItem:U,setItem:P,removeItem:W,clear:z,length:K,key:H,keys:J,dropInstance:Q};function G(){return typeof openDatabase==="function"}var X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var V="~~local_forage_type~";var Y=/^~~local_forage_type~([^~]+)~/;var Z="__lfsc__:";var $=Z.length;var nn="arbf";var rn="blob";var tn="si08";var en="ui08";var on="uic8";var an="si16";var un="si32";var fn="ur16";var cn="ui32";var sn="fl32";var vn="fl64";var ln=$+nn.length;var dn=Object.prototype.toString;function hn(n){var r=n.length*.75;var t=n.length;var e;var i=0;var o,a,u,f;if(n[n.length-1]==="="){r--;if(n[n.length-2]==="="){r--}}var c=new ArrayBuffer(r);var s=new Uint8Array(c);for(e=0;e<t;e+=4){o=X.indexOf(n[e]);a=X.indexOf(n[e+1]);u=X.indexOf(n[e+2]);f=X.indexOf(n[e+3]);s[i++]=o<<2|a>>4;s[i++]=(a&15)<<4|u>>2;s[i++]=(u&3)<<6|f&63}return c}function yn(n){var r=new Uint8Array(n);var t="";var e;for(e=0;e<r.length;e+=3){t+=X[r[e]>>2];t+=X[(r[e]&3)<<4|r[e+1]>>4];t+=X[(r[e+1]&15)<<2|r[e+2]>>6];t+=X[r[e+2]&63]}if(r.length%3===2){t=t.substring(0,t.length-1)+"="}else if(r.length%3===1){t=t.substring(0,t.length-2)+"=="}return t}function pn(n,r){var t="";if(n){t=dn.call(n)}if(n&&(t==="[object ArrayBuffer]"||n.buffer&&dn.call(n.buffer)==="[object ArrayBuffer]")){var e;var i=Z;if(n instanceof ArrayBuffer){e=n;i+=nn}else{e=n.buffer;if(t==="[object Int8Array]"){i+=tn}else if(t==="[object Uint8Array]"){i+=en}else if(t==="[object Uint8ClampedArray]"){i+=on}else if(t==="[object Int16Array]"){i+=an}else if(t==="[object Uint16Array]"){i+=fn}else if(t==="[object Int32Array]"){i+=un}else if(t==="[object Uint32Array]"){i+=cn}else if(t==="[object Float32Array]"){i+=sn}else if(t==="[object Float64Array]"){i+=vn}else{r(new Error("Failed to get type for BinaryArray"))}}r(i+yn(e))}else if(t==="[object Blob]"){var o=new FileReader;o.onload=function(){var t=V+n.type+"~"+yn(this.result);r(Z+rn+t)};o.readAsArrayBuffer(n)}else{try{r(JSON.stringify(n))}catch(t){console.error("Couldn't convert value into a JSON string: ",n);r(null,t)}}}function wn(n){if(n.substring(0,$)!==Z){return JSON.parse(n)}var r=n.substring(ln);var t=n.substring($,ln);var e;if(t===rn&&Y.test(r)){var i=r.match(Y);e=i[1];r=r.substring(i[0].length)}var o=hn(r);switch(t){case nn:return o;case rn:return f([o],{type:e});case tn:return new Int8Array(o);case en:return new Uint8Array(o);case on:return new Uint8ClampedArray(o);case an:return new Int16Array(o);case fn:return new Uint16Array(o);case un:return new Int32Array(o);case cn:return new Uint32Array(o);case sn:return new Float32Array(o);case vn:return new Float64Array(o);default:throw new Error("Unkown type: "+t)}}var bn={serialize:pn,deserialize:wn,stringToBuffer:hn,bufferToString:yn};function gn(n,r,t,e){n.executeSql("CREATE TABLE IF NOT EXISTS "+r.storeName+" "+"(id INTEGER PRIMARY KEY, key unique, value)",[],t,e)}function mn(n){var r=this;var t={db:null};if(n){for(var e in n){t[e]=typeof n[e]!=="string"?n[e].toString():n[e]}}var i=new c((function(n,e){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(n){return e(n)}t.db.transaction((function(i){gn(i,t,(function(){r._dbInfo=t;n()}),(function(n,r){e(r)}))}),e)}));t.serializer=bn;return i}function En(n,r,t,e,i,o){n.executeSql(t,e,i,(function(n,a){if(a.code===a.SYNTAX_ERR){n.executeSql("SELECT name FROM sqlite_master "+"WHERE type='table' AND name = ?",[r.storeName],(function(n,u){if(!u.rows.length){gn(n,r,(function(){n.executeSql(t,e,i,o)}),o)}else{o(n,a)}}),o)}else{o(n,a)}}),o)}function Sn(n,r){var t=this;n=l(n);var e=new c((function(r,e){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){En(t,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[n],(function(n,t){var e=t.rows.length?t.rows.item(0).value:null;if(e){e=i.serializer.deserialize(e)}r(e)}),(function(n,r){e(r)}))}))}))["catch"](e)}));s(e,r);return e}function In(n,r){var t=this;var e=new c((function(r,e){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){En(t,i,"SELECT * FROM "+i.storeName,[],(function(t,e){var o=e.rows;var a=o.length;for(var u=0;u<a;u++){var f=o.item(u);var c=f.value;if(c){c=i.serializer.deserialize(c)}c=n(c,f.key,u+1);if(c!==void 0){r(c);return}}r()}),(function(n,r){e(r)}))}))}))["catch"](e)}));s(e,r);return e}function kn(n,r,t,e){var i=this;n=l(n);var o=new c((function(o,a){i.ready().then((function(){if(r===undefined){r=null}var u=r;var f=i._dbInfo;f.serializer.serialize(r,(function(r,c){if(c){a(c)}else{f.db.transaction((function(t){En(t,f,"INSERT OR REPLACE INTO "+f.storeName+" "+"(key, value) VALUES (?, ?)",[n,r],(function(){o(u)}),(function(n,r){a(r)}))}),(function(r){if(r.code===r.QUOTA_ERR){if(e>0){o(kn.apply(i,[n,u,t,e-1]));return}a(r)}}))}}))}))["catch"](a)}));s(o,t);return o}function An(n,r,t){return kn.apply(this,[n,r,t,1])}function Bn(n,r){var t=this;n=l(n);var e=new c((function(r,e){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){En(t,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[n],(function(){r()}),(function(n,r){e(r)}))}))}))["catch"](e)}));s(e,r);return e}function On(n){var r=this;var t=new c((function(n,t){r.ready().then((function(){var e=r._dbInfo;e.db.transaction((function(r){En(r,e,"DELETE FROM "+e.storeName,[],(function(){n()}),(function(n,r){t(r)}))}))}))["catch"](t)}));s(t,n);return t}function Tn(n){var r=this;var t=new c((function(n,t){r.ready().then((function(){var e=r._dbInfo;e.db.transaction((function(r){En(r,e,"SELECT COUNT(key) as c FROM "+e.storeName,[],(function(r,t){var e=t.rows.item(0).c;n(e)}),(function(n,r){t(r)}))}))}))["catch"](t)}));s(t,n);return t}function _n(n,r){var t=this;var e=new c((function(r,e){t.ready().then((function(){var i=t._dbInfo;i.db.transaction((function(t){En(t,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[n+1],(function(n,t){var e=t.rows.length?t.rows.item(0).key:null;r(e)}),(function(n,r){e(r)}))}))}))["catch"](e)}));s(e,r);return e}function Dn(n){var r=this;var t=new c((function(n,t){r.ready().then((function(){var e=r._dbInfo;e.db.transaction((function(r){En(r,e,"SELECT key FROM "+e.storeName,[],(function(r,t){var e=[];for(var i=0;i<t.rows.length;i++){e.push(t.rows.item(i).key)}n(e)}),(function(n,r){t(r)}))}))}))["catch"](t)}));s(t,n);return t}function Rn(n){return new c((function(r,t){n.transaction((function(e){e.executeSql("SELECT name FROM sqlite_master "+"WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(t,e){var i=[];for(var o=0;o<e.rows.length;o++){i.push(e.rows.item(o).name)}r({db:n,storeNames:i})}),(function(n,r){t(r)}))}),(function(n){t(n)}))}))}function jn(n,r){r=d.apply(this,arguments);var t=this.config();n=typeof n!=="function"&&n||{};if(!n.name){n.name=n.name||t.name;n.storeName=n.storeName||t.storeName}var e=this;var i;if(!n.name){i=c.reject("Invalid arguments")}else{i=new c((function(r){var i;if(n.name===t.name){i=e._dbInfo.db}else{i=openDatabase(n.name,"","",0)}if(!n.storeName){r(Rn(i))}else{r({db:i,storeNames:[n.storeName]})}})).then((function(n){return new c((function(r,t){n.db.transaction((function(e){function i(n){return new c((function(r,t){e.executeSql("DROP TABLE IF EXISTS "+n,[],(function(){r()}),(function(n,r){t(r)}))}))}var o=[];for(var a=0,u=n.storeNames.length;a<u;a++){o.push(i(n.storeNames[a]))}c.all(o).then((function(){r()}))["catch"]((function(n){t(n)}))}),(function(n){t(n)}))}))}))}s(i,r);return i}var Nn={_driver:"webSQLStorage",_initStorage:mn,_support:G(),iterate:In,getItem:Sn,setItem:An,removeItem:Bn,clear:On,length:Tn,key:_n,keys:Dn,dropInstance:jn};function Cn(){try{return typeof localStorage!=="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch(n){return false}}function Ln(n,r){var t=n.name+"/";if(n.storeName!==r.storeName){t+=n.storeName+"/"}return t}function Mn(){var n="_localforage_support_test";try{localStorage.setItem(n,true);localStorage.removeItem(n);return false}catch(n){return true}}function Fn(){return!Mn()||localStorage.length>0}function Un(n){var r=this;var t={};if(n){for(var e in n){t[e]=n[e]}}t.keyPrefix=Ln(n,r._defaultConfig);if(!Fn()){return c.reject()}r._dbInfo=t;t.serializer=bn;return c.resolve()}function xn(n){var r=this;var t=r.ready().then((function(){var n=r._dbInfo.keyPrefix;for(var t=localStorage.length-1;t>=0;t--){var e=localStorage.key(t);if(e.indexOf(n)===0){localStorage.removeItem(e)}}}));s(t,n);return t}function Pn(n,r){var t=this;n=l(n);var e=t.ready().then((function(){var r=t._dbInfo;var e=localStorage.getItem(r.keyPrefix+n);if(e){e=r.serializer.deserialize(e)}return e}));s(e,r);return e}function Wn(n,r){var t=this;var e=t.ready().then((function(){var r=t._dbInfo;var e=r.keyPrefix;var i=e.length;var o=localStorage.length;var a=1;for(var u=0;u<o;u++){var f=localStorage.key(u);if(f.indexOf(e)!==0){continue}var c=localStorage.getItem(f);if(c){c=r.serializer.deserialize(c)}c=n(c,f.substring(i),a++);if(c!==void 0){return c}}}));s(e,r);return e}function zn(n,r){var t=this;var e=t.ready().then((function(){var r=t._dbInfo;var e;try{e=localStorage.key(n)}catch(n){e=null}if(e){e=e.substring(r.keyPrefix.length)}return e}));s(e,r);return e}function Kn(n){var r=this;var t=r.ready().then((function(){var n=r._dbInfo;var t=localStorage.length;var e=[];for(var i=0;i<t;i++){var o=localStorage.key(i);if(o.indexOf(n.keyPrefix)===0){e.push(o.substring(n.keyPrefix.length))}}return e}));s(t,n);return t}function Hn(n){var r=this;var t=r.keys().then((function(n){return n.length}));s(t,n);return t}function Jn(n,r){var t=this;n=l(n);var e=t.ready().then((function(){var r=t._dbInfo;localStorage.removeItem(r.keyPrefix+n)}));s(e,r);return e}function Qn(n,r,t){var e=this;n=l(n);var i=e.ready().then((function(){if(r===undefined){r=null}var t=r;return new c((function(i,o){var a=e._dbInfo;a.serializer.serialize(r,(function(r,e){if(e){o(e)}else{try{localStorage.setItem(a.keyPrefix+n,r);i(t)}catch(n){if(n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED"){o(n)}o(n)}}}))}))}));s(i,t);return i}function qn(n,r){r=d.apply(this,arguments);n=typeof n!=="function"&&n||{};if(!n.name){var t=this.config();n.name=n.name||t.name;n.storeName=n.storeName||t.storeName}var e=this;var i;if(!n.name){i=c.reject("Invalid arguments")}else{i=new c((function(r){if(!n.storeName){r(n.name+"/")}else{r(Ln(n,e._defaultConfig))}})).then((function(n){for(var r=localStorage.length-1;r>=0;r--){var t=localStorage.key(r);if(t.indexOf(n)===0){localStorage.removeItem(t)}}}))}s(i,r);return i}var Gn={_driver:"localStorageWrapper",_initStorage:Un,_support:Cn(),iterate:Wn,getItem:Pn,setItem:Qn,removeItem:Jn,clear:xn,length:Hn,key:zn,keys:Kn,dropInstance:qn};var Xn=function n(r,t){return r===t||typeof r==="number"&&typeof t==="number"&&isNaN(r)&&isNaN(t)};var Vn=function n(r,t){var e=r.length;var i=0;while(i<e){if(Xn(r[i],t)){return true}i++}return false};var Yn=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};var Zn={};var $n={};var nr={INDEXEDDB:q,WEBSQL:Nn,LOCALSTORAGE:Gn};var rr=[nr.INDEXEDDB._driver,nr.WEBSQL._driver,nr.LOCALSTORAGE._driver];var tr=["dropInstance"];var er=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tr);var ir={description:"",driver:rr.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function or(n,r){n[r]=function(){var t=arguments;return n.ready().then((function(){return n[r].apply(n,t)}))}}function ar(){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r){for(var t in r){if(r.hasOwnProperty(t)){if(Yn(r[t])){arguments[0][t]=r[t].slice()}else{arguments[0][t]=r[t]}}}}}return arguments[0]}var ur=function(){function n(r){i(this,n);for(var t in nr){if(nr.hasOwnProperty(t)){var e=nr[t];var o=e._driver;this[t]=o;if(!Zn[o]){this.defineDriver(e)}}}this._defaultConfig=ar({},ir);this._config=ar({},this._defaultConfig,r);this._driverSet=null;this._initDriver=null;this._ready=false;this._dbInfo=null;this._wrapLibraryMethodsWithReady();this.setDriver(this._config.driver)["catch"]((function(){}))}n.prototype.config=function n(r){if((typeof r==="undefined"?"undefined":e(r))==="object"){if(this._ready){return new Error("Can't call config() after localforage "+"has been used.")}for(var t in r){if(t==="storeName"){r[t]=r[t].replace(/\W/g,"_")}if(t==="version"&&typeof r[t]!=="number"){return new Error("Database version must be a number.")}this._config[t]=r[t]}if("driver"in r&&r.driver){return this.setDriver(this._config.driver)}return true}else if(typeof r==="string"){return this._config[r]}else{return this._config}};n.prototype.defineDriver=function n(r,t,e){var i=new c((function(n,t){try{var e=r._driver;var i=new Error("Custom driver not compliant; see "+"https://mozilla.github.io/localForage/#definedriver");if(!r._driver){t(i);return}var o=er.concat("_initStorage");for(var a=0,u=o.length;a<u;a++){var f=o[a];var v=!Vn(tr,f);if((v||r[f])&&typeof r[f]!=="function"){t(i);return}}var l=function n(){var t=function n(r){return function(){var n=new Error("Method "+r+" is not implemented by the current driver");var t=c.reject(n);s(t,arguments[arguments.length-1]);return t}};for(var e=0,i=tr.length;e<i;e++){var o=tr[e];if(!r[o]){r[o]=t(o)}}};l();var d=function t(i){if(Zn[e]){console.info("Redefining LocalForage driver: "+e)}Zn[e]=r;$n[e]=i;n()};if("_support"in r){if(r._support&&typeof r._support==="function"){r._support().then(d,t)}else{d(!!r._support)}}else{d(true)}}catch(n){t(n)}}));v(i,t,e);return i};n.prototype.driver=function n(){return this._driver||null};n.prototype.getDriver=function n(r,t,e){var i=Zn[r]?c.resolve(Zn[r]):c.reject(new Error("Driver not found."));v(i,t,e);return i};n.prototype.getSerializer=function n(r){var t=c.resolve(bn);v(t,r);return t};n.prototype.ready=function n(r){var t=this;var e=t._driverSet.then((function(){if(t._ready===null){t._ready=t._initDriver()}return t._ready}));v(e,r,r);return e};n.prototype.setDriver=function n(r,t,e){var i=this;if(!Yn(r)){r=[r]}var o=this._getSupportedDrivers(r);function a(){i._config.driver=i.driver()}function u(n){i._extend(n);a();i._ready=i._initStorage(i._config);return i._ready}function f(n){return function(){var r=0;function t(){while(r<n.length){var e=n[r];r++;i._dbInfo=null;i._ready=null;return i.getDriver(e).then(u)["catch"](t)}a();var o=new Error("No available storage method found.");i._driverSet=c.reject(o);return i._driverSet}return t()}}var s=this._driverSet!==null?this._driverSet["catch"]((function(){return c.resolve()})):c.resolve();this._driverSet=s.then((function(){var n=o[0];i._dbInfo=null;i._ready=null;return i.getDriver(n).then((function(n){i._driver=n._driver;a();i._wrapLibraryMethodsWithReady();i._initDriver=f(o)}))}))["catch"]((function(){a();var n=new Error("No available storage method found.");i._driverSet=c.reject(n);return i._driverSet}));v(this._driverSet,t,e);return this._driverSet};n.prototype.supports=function n(r){return!!$n[r]};n.prototype._extend=function n(r){ar(this,r)};n.prototype._getSupportedDrivers=function n(r){var t=[];for(var e=0,i=r.length;e<i;e++){var o=r[e];if(this.supports(o)){t.push(o)}}return t};n.prototype._wrapLibraryMethodsWithReady=function n(){for(var r=0,t=er.length;r<t;r++){or(this,er[r])}};n.prototype.createInstance=function r(t){return new n(t)};return n}();var fr=new ur;r.exports=fr},{3:3}]},{},[4])(4)}))}));const c={SecureStorage:"ionicSecureStorage",IndexedDB:f.INDEXEDDB,LocalStorage:f.LOCALSTORAGE};const s={name:"_ionicstorage",storeName:"_ionickv",dbKey:"_ionickey",driverOrder:[c.SecureStorage,c.IndexedDB,c.LocalStorage]};class v{constructor(n=s){this._db=null;this._secureStorageDriver=null;const r=Object.assign({},s,n||{});this._config=r}async create(){const n=f.createInstance(this._config);this._db=n;await n.setDriver(this._config.driverOrder||[]);return this}async defineDriver(n){if(n._driver===c.SecureStorage){this._secureStorageDriver=n}return f.defineDriver(n)}get driver(){var n;return((n=this._db)===null||n===void 0?void 0:n.driver())||null}assertDb(){if(!this._db){throw new Error("Database not created. Must call create() first")}return this._db}get(n){const r=this.assertDb();return r.getItem(n)}set(n,r){const t=this.assertDb();return t.setItem(n,r)}remove(n){const r=this.assertDb();return r.removeItem(n)}clear(){const n=this.assertDb();return n.clear()}length(){const n=this.assertDb();return n.length()}keys(){const n=this.assertDb();return n.keys()}forEach(n){const r=this.assertDb();return r.iterate(n)}setEncryptionKey(n){var r;if(!this._secureStorageDriver){throw new Error("@ionic-enterprise/secure-storage not installed. Encryption support not available")}else{(r=this._secureStorageDriver)===null||r===void 0?void 0:r.setEncryptionKey(n)}}}const l=(n,r,t)=>{const e=n.get(r);if(!e){n.set(r,[t])}else if(!e.includes(t)){e.push(t)}};const d=(n,r)=>{let t;return(...e)=>{if(t){clearTimeout(t)}t=setTimeout((()=>{t=0;n(...e)}),r)}};const h=n=>!("isConnected"in n)||n.isConnected;const y=d((n=>{for(let r of n.keys()){n.set(r,n.get(r).filter(h))}}),2e3);const p=()=>{if(typeof e!=="function"){return{}}const n=new Map;return{dispose:()=>n.clear(),get:r=>{const t=e();if(t){l(n,r,t)}},set:r=>{const t=n.get(r);if(t){n.set(r,t.filter(i))}y(n)},reset:()=>{n.forEach((n=>n.forEach(i)));y(n)}}};const w=n=>typeof n==="function"?n():n;const b=(n,r=((n,r)=>n!==r))=>{const t=w(n);let e=new Map(Object.entries(t!==null&&t!==void 0?t:{}));const i={dispose:[],get:[],set:[],reset:[]};const o=()=>{var r;e=new Map(Object.entries((r=w(n))!==null&&r!==void 0?r:{}));i.reset.forEach((n=>n()))};const a=()=>{i.dispose.forEach((n=>n()));o()};const u=n=>{i.get.forEach((r=>r(n)));return e.get(n)};const f=(n,t)=>{const o=e.get(n);if(r(t,o,n)){e.set(n,t);i.set.forEach((r=>r(n,t,o)))}};const c=typeof Proxy==="undefined"?{}:new Proxy(t,{get(n,r){return u(r)},ownKeys(n){return Array.from(e.keys())},getOwnPropertyDescriptor(){return{enumerable:true,configurable:true}},has(n,r){return e.has(r)},set(n,r,t){f(r,t);return true}});const s=(n,r)=>{i[n].push(r);return()=>{g(i[n],r)}};const v=(r,t)=>{const e=s("set",((n,e)=>{if(n===r){t(e)}}));const i=s("reset",(()=>t(w(n)[r])));return()=>{e();i()}};const l=(...n)=>{const r=n.reduce(((n,r)=>{if(r.set){n.push(s("set",r.set))}if(r.get){n.push(s("get",r.get))}if(r.reset){n.push(s("reset",r.reset))}if(r.dispose){n.push(s("dispose",r.dispose))}return n}),[]);return()=>r.forEach((n=>n()))};const d=n=>{const r=e.get(n);i.set.forEach((t=>t(n,r,r)))};return{state:c,get:u,set:f,on:s,onChange:v,use:l,dispose:a,reset:o,forceUpdate:d}};const g=(n,r)=>{const t=n.indexOf(r);if(t>=0){n[t]=n[n.length-1];n.length--}};const m=(n,r)=>{const t=b(n,r);t.use(p());return t};const{state:E,onChange:S,on:I,reset:k}=m({t1:"unlocked",t2:"locked",t3:"locked",t4:"locked",t5:"locked",t6:"locked",t7:"locked",t8:"locked",t9:"locked",t10:"locked",t11:"locked",t12:"locked",playedIntro:false,showBravo:false,appVersion:o});function A(n){const r=Math.floor(Math.random()*n.length);const t=n.splice(r,1)[0];return t}function B(n,r){let t=[...r];if(t.length>2){t=t.filter((n=>n!=="t12"))}const e=[];for(let r=0;r<n;r++){e.push(A(t))}return e}const O=async n=>new Promise((r=>{setTimeout((()=>{r()}),n)}));async function T(n){const r=Object.keys(E).filter((n=>E[n]==="unlocked"));if(r.length>=3)return;await O(500);const t=Object.keys(E).filter((n=>E[n]==="locked"));const e=B(n,t);const i=t.map((async n=>{const r=Math.random()*500;await O(r);const t=800;return setInterval((()=>{if(E[n]==="locked"){E[n]="highlighted"}setTimeout((()=>{if(e.includes(n)){E[n]="unlocked"}else{E[n]="locked"}}),200)}),t)}));const o=await Promise.all(i);setTimeout((()=>{o.forEach((n=>clearInterval(n)))}),2e3)}async function _(){const n=new v;await n.create();const r=()=>n.set("app-state",JSON.stringify(E));I("set",r);I("reset",r);try{const t=await n.get("app-state");const e=JSON.parse(t);if((e===null||e===void 0?void 0:e.appVersion)===(E===null||E===void 0?void 0:E.appVersion)){for(const n in e){if(Object.prototype.hasOwnProperty.call(e,n)){E[n]=e[n]==="highlighted"?"locked":e[n]}}}else{r()}}catch(n){console.warn("Problem when trying to restore the state from storage")}}function D(){let n=true;try{const r=window.location.search;const t=new URLSearchParams(r);n=t.get("shuffle")!=="false"}catch(n){}return n}_().then().catch().finally((()=>{const n=D();S("t1",(r=>{if(r==="done"){if(n){const n=3;T(n)}else{E.t2="unlocked";E.t3="unlocked";E.t4="unlocked";E.t5="unlocked";E.t6="unlocked";E.t7="unlocked";E.t8="unlocked";E.t9="unlocked";E.t10="unlocked";E.t11="unlocked";E.t12="unlocked"}}}));if(n){for(let n=2;n<=12;n++){S("t"+n,(n=>{if(n==="done"){const n=1;T(n)}}))}}I("set",(async n=>{if(n.startsWith("t")){const n=[E.t1,E.t2,E.t3,E.t4,E.t5,E.t6,E.t7,E.t8,E.t9,E.t10,E.t11,E.t12];const r=n.filter((n=>n==="done"));if(n.length===r.length){await O(1e3);E.showBravo=true}else if(E.showBravo===true){E.showBravo=false}}}))}));export{k as a,u as r,E as s};
//# sourceMappingURL=p-4afc53cc.js.map