import{r as t,e as i,h as s,H as e}from"./p-1bafedb0.js";const o="div,p{color:var(--ion-color-danger)}";const n=class{constructor(s){t(this,s);this.validationCompleted=i(this,"validationCompleted",7);this.requiredMismatch=new Set;this.datatypeMismatch=new Set;this.dataIsNotValid={};this.data=undefined;this.expectedKeys=undefined}componentWillLoad(){this.validateData()}validateData(){this.requiredMismatch.clear();this.datatypeMismatch.clear();this.dataIsNotValid={};this.expectedKeys.forEach((t=>{this.data.forEach((i=>{var s;if(t.required&&i[t.name]===undefined){this.requiredMismatch.add(t.name)}for(const e in i){if(Object.prototype.hasOwnProperty.call(i,e)){const o=i[e];if(t.name===e){if(t.datatype&&((s=o===null||o===void 0?void 0:o.datatype)!==null&&s!==void 0?s:"string")!==t.datatype){this.datatypeMismatch.add(t.name)}if((t===null||t===void 0?void 0:t.customValidator)&&typeof t.customValidator==="function"){const i=t.customValidator(o);if(i)this.dataIsNotValid[t.name]=i}}}}}))}));const t=this.requiredMismatch.size===0&&this.datatypeMismatch.size===0&&Object.keys(this.dataIsNotValid).length===0;this.validationCompleted.emit(t)}render(){return s(e,null,Array.from(this.requiredMismatch).map((t=>s("p",null,"The variable ?",t," must not return empty values. Currently it is either not bound or it returns empty records."))),Array.from(this.datatypeMismatch).map((t=>{var i;return s("p",null,"The variable ?",t," must be of datatype ",(i=this.expectedKeys.find((i=>i.name===t)))===null||i===void 0?void 0:i.datatype,". Some or all records do not match that data type.")})),Object.keys(this.dataIsNotValid).map((t=>s("div",null,"Validation errors for variable ?",t,":",s("ul",null,Array.from(this.dataIsNotValid[t]).map((t=>s("li",null,t))))))))}};n.style=o;export{n as geov_yasgui_data_validation};
//# sourceMappingURL=p-8918b69f.entry.js.map