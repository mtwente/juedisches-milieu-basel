import{r as B,e as g,w as x,h as m,H as S,d as N}from"./p-1bafedb0.js";import{i as b}from"./p-b4056f43.js";import{c as E,h as v}from"./p-b2d007f6.js";import{g as I}from"./p-501d07b5.js";const G=":host{--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:grid;grid-auto-columns:1fr;position:relative;align-items:stretch;justify-content:center;width:100%;background:var(--background);font-family:var(--ion-font-family, inherit);text-align:center;contain:paint;user-select:none}:host(.segment-scrollable){justify-content:start;width:auto;overflow-x:auto;grid-auto-columns:minmax(min-content, 1fr)}:host(.segment-scrollable::-webkit-scrollbar){display:none}:host{--background:rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.065);border-radius:8px;overflow:hidden;z-index:0}:host(.ion-color){background:rgba(var(--ion-color-base-rgb), 0.065)}:host(.in-toolbar){-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:0;margin-bottom:0;width:auto}:host(.in-toolbar:not(.ion-color)){background:var(--ion-toolbar-segment-background, var(--background))}:host(.in-toolbar-color:not(.ion-color)){background:rgba(var(--ion-color-contrast-rgb), 0.11)}",L=":host{--ripple-color:currentColor;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:grid;grid-auto-columns:1fr;position:relative;align-items:stretch;justify-content:center;width:100%;background:var(--background);font-family:var(--ion-font-family, inherit);text-align:center;contain:paint;user-select:none}:host(.segment-scrollable){justify-content:start;width:auto;overflow-x:auto;grid-auto-columns:minmax(min-content, 1fr)}:host(.segment-scrollable::-webkit-scrollbar){display:none}:host{--background:transparent;grid-auto-columns:minmax(auto, 360px)}:host(.in-toolbar){min-height:var(--min-height)}:host(.segment-scrollable) ::slotted(ion-segment-button){min-width:auto}",p=class{constructor(t){B(this,t),this.ionChange=g(this,"ionChange",7),this.ionSelect=g(this,"ionSelect",7),this.ionStyle=g(this,"ionStyle",7),this.onClick=s=>{const n=s.target,e=this.checked;n.tagName!=="ION-SEGMENT"&&(this.value=n.value,n!==e&&this.emitValueChange(),(this.scrollable||!this.swipeGesture)&&(e?this.checkButton(e,n):this.setCheckedClasses()))},this.getSegmentButton=s=>{var n,e;const i=this.getButtons().filter(a=>!a.disabled),o=i.findIndex(a=>a===document.activeElement);switch(s){case"first":return i[0];case"last":return i[i.length-1];case"next":return(n=i[o+1])!==null&&n!==void 0?n:i[0];case"previous":return(e=i[o-1])!==null&&e!==void 0?e:i[i.length-1];default:return null}},this.activated=!1,this.color=void 0,this.disabled=!1,this.scrollable=!1,this.swipeGesture=!0,this.value=void 0,this.selectOnFocus=!1}colorChanged(t,s){(s===void 0&&t!==void 0||s!==void 0&&t===void 0)&&this.emitStyle()}swipeGestureChanged(){this.gestureChanged()}valueChanged(t){if(this.ionSelect.emit({value:t}),this.scrollable){const n=this.getButtons().find(e=>e.value===t);n!==void 0&&n.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}}disabledChanged(){this.gestureChanged();const t=this.getButtons();for(const s of t)s.disabled=this.disabled}gestureChanged(){this.gesture&&this.gesture.enable(!this.scrollable&&!this.disabled&&this.swipeGesture)}connectedCallback(){this.emitStyle()}componentWillLoad(){this.emitStyle()}async componentDidLoad(){this.setCheckedClasses(),this.gesture=(await import("./p-f2599c25.js")).createGesture({el:this.el,gestureName:"segment",gesturePriority:100,threshold:0,passive:!1,onStart:t=>this.onStart(t),onMove:t=>this.onMove(t),onEnd:t=>this.onEnd(t)}),this.gestureChanged(),this.disabled&&this.disabledChanged()}onStart(t){this.valueBeforeGesture=this.value,this.activate(t)}onMove(t){this.setNextIndex(t)}onEnd(t){this.setActivated(!1),this.setNextIndex(t,!0),t.event.stopImmediatePropagation();const s=this.value;s!==void 0&&this.valueBeforeGesture!==s&&this.emitValueChange(),this.valueBeforeGesture=void 0}emitValueChange(){const{value:t}=this;this.ionChange.emit({value:t})}getButtons(){return Array.from(this.el.querySelectorAll("ion-segment-button"))}get checked(){return this.getButtons().find(t=>t.value===this.value)}setActivated(t){this.getButtons().forEach(n=>{t?n.classList.add("segment-button-activated"):n.classList.remove("segment-button-activated")}),this.activated=t}activate(t){const s=t.event.target,e=this.getButtons().find(i=>i.value===this.value);s.tagName==="ION-SEGMENT-BUTTON"&&(e||(this.value=s.value,this.setCheckedClasses()),this.value===s.value&&this.setActivated(!0))}getIndicator(t){return(t.shadowRoot||t).querySelector(".segment-button-indicator")}checkButton(t,s){const n=this.getIndicator(t),e=this.getIndicator(s);if(n===null||e===null)return;const i=n.getBoundingClientRect(),o=e.getBoundingClientRect(),a=i.width/o.width,l=`translate3d(${i.left-o.left}px, 0, 0) scaleX(${a})`;x(()=>{e.classList.remove("segment-button-indicator-animated"),e.style.setProperty("transform",l),e.getBoundingClientRect(),e.classList.add("segment-button-indicator-animated"),e.style.setProperty("transform","")}),this.value=s.value,this.setCheckedClasses()}setCheckedClasses(){const t=this.getButtons(),n=t.findIndex(e=>e.value===this.value)+1;for(const e of t)e.classList.remove("segment-button-after-checked");n<t.length&&t[n].classList.add("segment-button-after-checked")}setNextIndex(t,s=!1){const n=b(this.el),e=this.activated,i=this.getButtons(),o=i.findIndex(c=>c.value===this.value),a=i[o];let r,l;if(o===-1)return;const u=a.getBoundingClientRect(),d=u.left,f=u.width,h=t.currentX,k=u.top+u.height/2,C=this.el.getRootNode().elementFromPoint(h,k),w=n?h>d+f:h<d,y=n?h<d:h>d+f;if(e&&!s){if(w){const c=o-1;c>=0&&(l=c)}else if(y&&e&&!s){const c=o+1;c<i.length&&(l=c)}l!==void 0&&!i[l].disabled&&(r=i[l])}if(!e&&s&&(r=C),r!=null){if(r.tagName==="ION-SEGMENT")return!1;a!==r&&this.checkButton(a,r)}return!0}emitStyle(){this.ionStyle.emit({segment:!0})}onKeyDown(t){const s=b(this.el);let n=this.selectOnFocus,e;switch(t.key){case"ArrowRight":t.preventDefault(),e=s?this.getSegmentButton("previous"):this.getSegmentButton("next");break;case"ArrowLeft":t.preventDefault(),e=s?this.getSegmentButton("next"):this.getSegmentButton("previous");break;case"Home":t.preventDefault(),e=this.getSegmentButton("first");break;case"End":t.preventDefault(),e=this.getSegmentButton("last");break;case" ":case"Enter":t.preventDefault(),e=document.activeElement,n=!0}if(e){if(n){const i=this.checked;this.checkButton(i||e,e),e!==i&&this.emitValueChange()}e.setFocus()}}render(){const t=I(this);return m(S,{role:"tablist",onClick:this.onClick,class:E(this.color,{[t]:!0,"in-toolbar":v("ion-toolbar",this.el),"in-toolbar-color":v("ion-toolbar[color]",this.el),"segment-activated":this.activated,"segment-disabled":this.disabled,"segment-scrollable":this.scrollable})},m("slot",null))}get el(){return N(this)}static get watchers(){return{color:["colorChanged"],swipeGesture:["swipeGestureChanged"],value:["valueChanged"],disabled:["disabledChanged"]}}};p.style={ios:G,md:L};export{p as ion_segment};
