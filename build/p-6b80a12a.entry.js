import{r as s,h as t,H as n,d as i}from"./p-1bafedb0.js";import{i as o}from"./p-27a92608.js";import{i as a}from"./p-fbcdaa2f.js";import{s as e}from"./p-855a8bbd.js";const c=":host{display:block;position:relative}.loading{display:flex;align-items:center;justify-content:center;background-color:var(--ion-color-light-tint, #fafafa)}";const l=["#322659","#44337A","#553C9A","#6B46C1","#805AD5","#9F7AEA","#B794F4","#D6BCFA","#E9D8FD","#FAF5FF","#E9D8FD","#D6BCFA","#B794F4","#9F7AEA","#805AD5","#6B46C1","#553C9A","#44337A"];const r=()=>`\n  PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n\n  SELECT (group_concat(?class;separator=", ") as ?classnames) (Max(?classcount) as ?classcounts)\n  WHERE {\n      {\n          SELECT ?classuri (count(?entity) as ?classcount)\n          WHERE {\n              ?entity a ?classuri .\n          }\n          GROUP BY ?classuri\n      }\n      ?classuri rdfs:label ?class\n  }\n  GROUP BY ?classuri\n  ORDER by DESC(?classcounts)\n`;const d=class{constructor(t){s(this,t);this.sparqlEndpoint=undefined;this.width=undefined;this.height=undefined;this.loading=undefined}async componentDidLoad(){if(!o()){this.loading=true;const s=await a();e(this.sparqlEndpoint,r()).then((t=>{var n;const i=(n=t===null||t===void 0?void 0:t.results)===null||n===void 0?void 0:n.bindings;const o=i.map((s=>s.classnames.value));const a=i.map((s=>parseInt(s.classcounts.value)));const e=[];for(let s=0;s<a.length;s++){e.push(l[s%l.length])}const c=[{labels:o,values:a,type:"pie",textinfo:"label+percent",textposition:"inside",marker:{colors:e}}];const r=a.length;const d=Math.round(a.reduce(((s,t)=>s+t),0)/1e3);const h={width:this.width,height:this.height,title:`Distribution of ${r} classes (${d}k entities)`,showlegend:false};if(s)s.newPlot(this.el,c,h);this.loading=false}))}}render(){return t(n,null,this.loading&&t("div",{style:{width:this.width+"px",height:this.height+"px"},class:"loading"},t("ion-spinner",{name:"dots"})))}get el(){return i(this)}};d.style=c;export{d as geov_class_distri};
//# sourceMappingURL=p-6b80a12a.entry.js.map