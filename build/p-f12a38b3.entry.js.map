{"version":3,"names":["geovClassSelectCss","GeovClassSelect","constructor","hostRef","this","selection","maxLength","checkedOnInit","items","undefined","loading","showAll","allToggler","componentDidLoad","emitSelection","onItemChange","uri","selected","changed","selectedClassUris","Object","keys","filter","k","selectionChanged","emit","isChecked","toggleAll","_a","forEach","i","classUri","render","_b","_c","_d","_e","h","Host","lines","length","onClick","slot","checked","onIonChange","_","map","item","index","class","classLabel","instanceCount","event","detail","animated"],"sources":["node_modules/@geovistory/design-system-web/dist/collection/components/geov-class-select/geov-class-select.css?tag=geov-class-select","node_modules/@geovistory/design-system-web/dist/collection/components/geov-class-select/geov-class-select.js"],"sourcesContent":[":host {\n  display: block;\n}\n\n.hide {\n  display: none !important;\n}\n","import { h, Host } from \"@stencil/core\";\n/**\n * This component is a multi-select UI for classes (with label, uri and count).\n */\nexport class GeovClassSelect {\n  constructor() {\n    this.selection = {};\n    // the max length of the list list when this.showAll = false\n    this.maxLength = 6;\n    this.checkedOnInit = true;\n    this.items = undefined;\n    this.loading = undefined;\n    this.showAll = false;\n    this.allToggler = undefined;\n    this.allToggler = !this.checkedOnInit;\n  }\n  /**\n   * Called once just after the component is fully loaded and the first render() occurs.\n   */\n  componentDidLoad() {\n    this.emitSelection();\n  }\n  onItemChange(uri, selected) {\n    const changed = this.selection[uri] !== selected;\n    this.selection[uri] = selected;\n    if (changed)\n      this.emitSelection();\n  }\n  emitSelection() {\n    const selectedClassUris = Object.keys(this.selection).filter(k => this.selection[k] === true);\n    this.selectionChanged.emit({ selectedClassUris });\n  }\n  isChecked(uri) {\n    if (this.selection[uri] !== undefined)\n      return this.selection[uri];\n    this.selection[uri] = this.checkedOnInit;\n    return this.selection[uri];\n  }\n  toggleAll() {\n    var _a;\n    (_a = this.items) === null || _a === void 0 ? void 0 : _a.forEach(i => {\n      this.selection[i.classUri] = this.allToggler;\n    });\n    this.allToggler = !this.allToggler;\n    this.emitSelection();\n  }\n  render() {\n    var _a, _b, _c, _d, _e;\n    return (h(Host, null, h(\"ion-list\", { lines: \"full\" }, h(\"ion-list-header\", null, h(\"ion-label\", null, \"Classes (\", (_b = (_a = this.items) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0, \")\"), ((_c = this.items) === null || _c === void 0 ? void 0 : _c.length) > this.maxLength &&\n      (this.showAll === false ? (h(\"ion-button\", { onClick: () => (this.showAll = true) }, \"Show all\")) : (h(\"ion-button\", { onClick: () => (this.showAll = false) }, \"Show less\")))), h(\"ion-item\", null, h(\"ion-note\", null, \"All Classes\"), h(\"ion-checkbox\", { slot: \"end\", checked: !this.allToggler, onIonChange: _ => this.toggleAll() })), (_d = this.items) === null || _d === void 0 ? void 0 :\n      _d.map((item, index) => (h(\"ion-item\", { class: !this.showAll && index >= this.maxLength ? 'hide' : '' }, h(\"ion-label\", null, item.classLabel), h(\"ion-badge\", { slot: \"end\" }, item.instanceCount), h(\"ion-checkbox\", { slot: \"end\", checked: this.isChecked(item.classUri), onIonChange: event => this.onItemChange(item.classUri, event.detail.checked) })))), !((_e = this.items) === null || _e === void 0 ? void 0 : _e.length) && !this.loading && (h(\"ion-item\", null, h(\"ion-label\", null, \"No class found\"))), this.loading &&\n      ['', '', '', '', ''].map(_ => (h(\"ion-item\", null, h(\"ion-label\", null, h(\"ion-skeleton-text\", { animated: true }))))))));\n  }\n  static get is() { return \"geov-class-select\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"geov-class-select.css\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"geov-class-select.css\"]\n    };\n  }\n  static get properties() {\n    return {\n      \"checkedOnInit\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"If true, the classes are checked on init, else none is checked on init\"\n        },\n        \"attribute\": \"checked-on-init\",\n        \"reflect\": false,\n        \"defaultValue\": \"true\"\n      },\n      \"items\": {\n        \"type\": \"unknown\",\n        \"mutable\": true,\n        \"complexType\": {\n          \"original\": \"GeovClassSelectItem[]\",\n          \"resolved\": \"GeovClassSelectItem[]\",\n          \"references\": {\n            \"GeovClassSelectItem\": {\n              \"location\": \"local\",\n              \"path\": \"/Users/admin/Gorg/design-system/packages/design-system-web/src/components/geov-class-select/geov-class-select.tsx\",\n              \"id\": \"src/components/geov-class-select/geov-class-select.tsx::GeovClassSelectItem\"\n            }\n          }\n        },\n        \"required\": false,\n        \"optional\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"\"\n        }\n      },\n      \"loading\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"\"\n        },\n        \"attribute\": \"loading\",\n        \"reflect\": false\n      }\n    };\n  }\n  static get states() {\n    return {\n      \"showAll\": {},\n      \"allToggler\": {}\n    };\n  }\n  static get events() {\n    return [{\n        \"method\": \"selectionChanged\",\n        \"name\": \"selectionChanged\",\n        \"bubbles\": true,\n        \"cancelable\": true,\n        \"composed\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"\"\n        },\n        \"complexType\": {\n          \"original\": \"ClassSelectEvent\",\n          \"resolved\": \"ClassSelectEvent\",\n          \"references\": {\n            \"ClassSelectEvent\": {\n              \"location\": \"local\",\n              \"path\": \"/Users/admin/Gorg/design-system/packages/design-system-web/src/components/geov-class-select/geov-class-select.tsx\",\n              \"id\": \"src/components/geov-class-select/geov-class-select.tsx::ClassSelectEvent\"\n            }\n          }\n        }\n      }];\n  }\n}\n//# sourceMappingURL=geov-class-select.js.map\n"],"mappings":"yDAAA,MAAMA,EAAqB,qD,MCIdC,EAAe,MAC1B,WAAAC,CAAAC,G,6DACEC,KAAKC,UAAY,GAEjBD,KAAKE,UAAY,EACjBF,KAAKG,cAAgB,KACrBH,KAAKI,MAAQC,UACbL,KAAKM,QAAUD,UACfL,KAAKO,QAAU,MACfP,KAAKQ,WAAaH,UAClBL,KAAKQ,YAAcR,KAAKG,a,CAK1B,gBAAAM,GACET,KAAKU,e,CAEP,YAAAC,CAAaC,EAAKC,GAChB,MAAMC,EAAUd,KAAKC,UAAUW,KAASC,EACxCb,KAAKC,UAAUW,GAAOC,EACtB,GAAIC,EACFd,KAAKU,e,CAET,aAAAA,GACE,MAAMK,EAAoBC,OAAOC,KAAKjB,KAAKC,WAAWiB,QAAOC,GAAKnB,KAAKC,UAAUkB,KAAO,OACxFnB,KAAKoB,iBAAiBC,KAAK,CAAEN,qB,CAE/B,SAAAO,CAAUV,GACR,GAAIZ,KAAKC,UAAUW,KAASP,UAC1B,OAAOL,KAAKC,UAAUW,GACxBZ,KAAKC,UAAUW,GAAOZ,KAAKG,cAC3B,OAAOH,KAAKC,UAAUW,E,CAExB,SAAAW,GACE,IAAIC,GACHA,EAAKxB,KAAKI,SAAW,MAAQoB,SAAY,OAAS,EAAIA,EAAGC,SAAQC,IAChE1B,KAAKC,UAAUyB,EAAEC,UAAY3B,KAAKQ,UAAU,IAE9CR,KAAKQ,YAAcR,KAAKQ,WACxBR,KAAKU,e,CAEP,MAAAkB,GACE,IAAIJ,EAAIK,EAAIC,EAAIC,EAAIC,EACpB,OAAQC,EAAEC,EAAM,KAAMD,EAAE,WAAY,CAAEE,MAAO,QAAUF,EAAE,kBAAmB,KAAMA,EAAE,YAAa,KAAM,aAAcJ,GAAML,EAAKxB,KAAKI,SAAW,MAAQoB,SAAY,OAAS,EAAIA,EAAGY,UAAY,MAAQP,SAAY,EAAIA,EAAK,EAAG,OAAQC,EAAK9B,KAAKI,SAAW,MAAQ0B,SAAY,OAAS,EAAIA,EAAGM,QAAUpC,KAAKE,YAC7SF,KAAKO,UAAY,MAAS0B,EAAE,aAAc,CAAEI,QAAS,IAAOrC,KAAKO,QAAU,MAAS,YAAgB0B,EAAE,aAAc,CAAEI,QAAS,IAAOrC,KAAKO,QAAU,OAAU,eAAiB0B,EAAE,WAAY,KAAMA,EAAE,WAAY,KAAM,eAAgBA,EAAE,eAAgB,CAAEK,KAAM,MAAOC,SAAUvC,KAAKQ,WAAYgC,YAAaC,GAAKzC,KAAKuB,gBAAkBQ,EAAK/B,KAAKI,SAAW,MAAQ2B,SAAY,OAAS,EAChYA,EAAGW,KAAI,CAACC,EAAMC,IAAWX,EAAE,WAAY,CAAEY,OAAQ7C,KAAKO,SAAWqC,GAAS5C,KAAKE,UAAY,OAAS,IAAM+B,EAAE,YAAa,KAAMU,EAAKG,YAAab,EAAE,YAAa,CAAEK,KAAM,OAASK,EAAKI,eAAgBd,EAAE,eAAgB,CAAEK,KAAM,MAAOC,QAASvC,KAAKsB,UAAUqB,EAAKhB,UAAWa,YAAaQ,GAAShD,KAAKW,aAAagC,EAAKhB,SAAUqB,EAAMC,OAAOV,iBAAmBP,EAAKhC,KAAKI,SAAW,MAAQ4B,SAAY,OAAS,EAAIA,EAAGI,UAAYpC,KAAKM,SAAY2B,EAAE,WAAY,KAAMA,EAAE,YAAa,KAAM,mBAAqBjC,KAAKM,SAC/f,CAAC,GAAI,GAAI,GAAI,GAAI,IAAIoC,KAAID,GAAMR,EAAE,WAAY,KAAMA,EAAE,YAAa,KAAMA,EAAE,oBAAqB,CAAEiB,SAAU,Y"}