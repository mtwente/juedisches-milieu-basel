{"version":3,"names":["geovEntityCss","GeovEntity","constructor","hostRef","this","predicatesBasic","predicatesTime","excluded","sparqlEndpoint","undefined","entityId","projectId","language","fetchBeforeRender","uriRegex","uriReplace","ssrIdPrefix","render","pageLink","getPageLink","uri","getURI","h","Host","class","fixed","_ssrId","withIcon","entityUri","getTimeSpanUri","href","target","name","onDataFetched","removeIfEmpty","predicateExclude","join","fixedGrid","color","fill","buttonLabel","regexReplace","replace","event","detail","propsWithCount","length","remove"],"sources":["node_modules/@geovistory/design-system-web/dist/collection/components/geov-entity/geov-entity.css?tag=geov-entity","node_modules/@geovistory/design-system-web/dist/collection/components/geov-entity/geov-entity.js"],"sourcesContent":[":host {\n  display: block;\n}\n\n.container {\n  background: var(--ion-color-tertiary);\n  color: var(--ion-color-tertiary-contrast);\n}\n\n.header {\n  padding: var(--ion-padding);\n  padding-top: 2.5rem;\n  background: var(--ion-color-tertiary-shade);\n}\n\n.header h1 {\n  margin-top: 0;\n}\n\n.header geov-entity-class-label,\n.header geov-entity-definition {\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.metadata {\n  padding: 0.5rem 0 0.5rem 0;\n  font-size: .875rem;\n  color: rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4);\n}\n\n.metadata a {\n  color: rgba(var(--ion-text-color-rgb, 0, 0, 0), 0.4);\n  text-decoration: var(--gv-entity-link-decoration);\n}\n\n.metadata a:hover {\n  text-decoration: underline;\n}\n\n.section {\n  display: block;\n  color: var(--ion-color-tertiary-contrast);\n  padding: 24px 0;\n}\n\n.section:nth-child(even) {\n  background: var(--ion-color-tertiary-shade);\n}\n\n.section:nth-child(odd) {\n  background: var(--ion-color-tertiary);\n}\n\n.columns-1 {\n  --column-count: 1;\n  --column-gap: 0px;\n}\n\n.columns-2 {\n  --column-count: 1;\n  --column-gap: 0px;\n}\n\n.columns-3 {\n  --column-count: 1;\n  --column-gap: 0px;\n}\n\n/* lg and up */\n@media screen and (min-width: 992px) {\n\n  .columns-3,\n  .columns-2 {\n    --column-count: 2;\n  }\n}\n\n/* xl and up */\n@media screen and (min-width: 1200px) {\n  .columns-3 {\n    --column-count: 3;\n  }\n}\n\n.supertitle geov-entity-class-label {\n  font-size: 1.7rem;\n  margin-block-start: 0.9em;\n  margin-block-end: 0.9em;\n  line-height: 1.8;\n}\n\na.entityLink {\n  color: var(--gv-entity-link-color, #000);\n  text-decoration: var(--gv-entity-link-decoration);\n}\n\na.entityLink:hover {\n  text-decoration: underline;\n}\n\ngeov-entity geov-entity-properties {\n  display: block;\n  padding-top: 3rem;\n}\n","import { h, Host } from \"@stencil/core\";\nimport { getTimeSpanUri } from \"../../lib/getTimeSpanUri\";\nimport { regexReplace } from \"../../lib/regexReplace\";\n/**\n * This component displays the data of a geovistory entity.\n * It is used to generate entity pages on geovistory.org.\n */\nexport class GeovEntity {\n  constructor() {\n    this.predicatesBasic = ['http://www.w3.org/2000/01/rdf-schema#label', 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type'];\n    this.predicatesTime = ['https://ontome.net/ontology/p4'];\n    this.excluded = ['https://ontome.net/ontology/p1943', 'https://ontome.net/ontology/p1762'];\n    this.sparqlEndpoint = undefined;\n    this.entityId = undefined;\n    this.projectId = undefined;\n    this.language = 'en';\n    this.fetchBeforeRender = true;\n    this.uriRegex = undefined;\n    this.uriReplace = undefined;\n    this.ssrIdPrefix = '';\n  }\n  render() {\n    const pageLink = this.getPageLink();\n    const uri = this.getURI();\n    return (h(Host, null, h(\"div\", { class: \"container\" }, h(\"div\", { class: \"header\" }, h(\"ion-grid\", { fixed: true }, h(\"div\", { class: \"supertitle\" }, h(\"geov-entity-class-label\", { entityId: this.entityId, sparqlEndpoint: this.sparqlEndpoint, _ssrId: `${this.ssrIdPrefix}class-label`, withIcon: true }), h(\"geov-time-span\", { entityUri: getTimeSpanUri('http://geovistory.org/resource/' + this.entityId), sparqlEndpoint: this.sparqlEndpoint })), h(\"h1\", { class: \"unrestricted-width\" }, h(\"geov-entity-label\", { entityId: this.entityId, sparqlEndpoint: this.sparqlEndpoint, _ssrId: `${this.ssrIdPrefix}entity-label` })), h(\"div\", null, h(\"geov-entity-definition\", { entityId: this.entityId, sparqlEndpoint: this.sparqlEndpoint, _ssrId: `${this.ssrIdPrefix}definition` })), h(\"div\", { class: \"metadata\" }, h(\"div\", null, \"URI:\", ' ', h(\"a\", { href: uri, target: \"_blank\" }, uri)), this.projectId && (h(\"div\", null, \"Link:\", ' ', h(\"a\", { href: pageLink, target: \"_blank\" }, pageLink)))))), h(\"slot\", { name: \"body-start\" }), h(\"geov-entity-properties\", { onDataFetched: this.removeIfEmpty(), predicateExclude: [...this.predicatesBasic, ...this.excluded].join(','), fixedGrid: false, class: \"columns-1\", sparqlEndpoint: this.sparqlEndpoint, entityUri: 'http://geovistory.org/resource/' + this.entityId, language: 'en', fetchBeforeRender: this.fetchBeforeRender, uriRegex: this.uriRegex, uriReplace: this.uriReplace }), h(\"div\", { class: \"section columns-1 ion-text-center\" }, h(\"geov-entity-download-rdf\", { entityId: this.entityId, projectId: this.projectId, color: \"primary\", fill: \"outline\", buttonLabel: \"Download RDF\" })), h(\"slot\", { name: \"body-end\" }))));\n  }\n  /**\n   * Generates the URL of this page by applying the given regex.\n   *\n   * @returns the url to this page\n   */\n  getPageLink() {\n    return regexReplace('http://geovistory.org/resource/' + this.entityId, this.uriRegex, this.uriReplace);\n  }\n  /**\n   * Generates the URI of this resource. This depends on the regex, which allows to override\n   * the real uri to make working links in local, dev or staging environments.\n   * In contrast to getURL it omits the 'p' query parameter.\n   *\n   * @returns the url to this page\n   */\n  getURI() {\n    return this.getPageLink().replace('?p=' + this.projectId, '');\n  }\n  /**\n   * removes the element from dom, if the fetched data is empty\n   * @returns\n   */\n  removeIfEmpty() {\n    return event => {\n      if (event.detail.propsWithCount.length === 0) {\n        event.target.remove();\n      }\n    };\n  }\n  static get is() { return \"geov-entity\"; }\n  static get originalStyleUrls() {\n    return {\n      \"$\": [\"geov-entity.css\"]\n    };\n  }\n  static get styleUrls() {\n    return {\n      \"$\": [\"geov-entity.css\"]\n    };\n  }\n  static get properties() {\n    return {\n      \"sparqlEndpoint\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"sparqlEndpoint\\nURL of the sparql endpoint\"\n        },\n        \"attribute\": \"sparql-endpoint\",\n        \"reflect\": false\n      },\n      \"entityId\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"entityId\\nID number of entity, e.g. 'i315800'\"\n        },\n        \"attribute\": \"entity-id\",\n        \"reflect\": false\n      },\n      \"projectId\": {\n        \"type\": \"number\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"number | undefined\",\n          \"resolved\": \"number\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"projectId\\nID number of project, e.g. '123123'\"\n        },\n        \"attribute\": \"project-id\",\n        \"reflect\": false\n      },\n      \"language\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"language\\nprints the label with the language or english, if not found, e.g. 'en'\"\n        },\n        \"attribute\": \"language\",\n        \"reflect\": false,\n        \"defaultValue\": \"'en'\"\n      },\n      \"fetchBeforeRender\": {\n        \"type\": \"boolean\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"boolean\",\n          \"resolved\": \"boolean\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"\"\n        },\n        \"attribute\": \"fetch-before-render\",\n        \"reflect\": false,\n        \"defaultValue\": \"true\"\n      },\n      \"uriRegex\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"uriRegex\\nOptional regex with capturing groups to transform\\nthe uri into the desired url. To use together\\nwith uriReplace.\"\n        },\n        \"attribute\": \"uri-regex\",\n        \"reflect\": false\n      },\n      \"uriReplace\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": true,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"uriReplace\\nString used to replace the uriRegex.\\n\\nExample (pseudo code):\\nconst uriRegex = (http:\\\\/\\\\/geovistory.org\\\\/)(.*)\\nconst uriReplace = \\\"http://dev.geovistory.org/resource/$2?p=123\\\"\\nhttp://geovistory.org/resource/i54321 => http://dev.geovistory.org/resource/54321?p=123\"\n        },\n        \"attribute\": \"uri-replace\",\n        \"reflect\": false\n      },\n      \"ssrIdPrefix\": {\n        \"type\": \"string\",\n        \"mutable\": false,\n        \"complexType\": {\n          \"original\": \"string\",\n          \"resolved\": \"string\",\n          \"references\": {}\n        },\n        \"required\": false,\n        \"optional\": false,\n        \"docs\": {\n          \"tags\": [],\n          \"text\": \"\"\n        },\n        \"attribute\": \"ssr-id-prefix\",\n        \"reflect\": false,\n        \"defaultValue\": \"''\"\n      }\n    };\n  }\n}\n//# sourceMappingURL=geov-entity.js.map\n"],"mappings":"0HAAA,MAAMA,EAAgB,u4C,MCOTC,EAAU,MACrB,WAAAC,CAAAC,G,UACEC,KAAKC,gBAAkB,CAAC,6CAA8C,mDACtED,KAAKE,eAAiB,CAAC,kCACvBF,KAAKG,SAAW,CAAC,oCAAqC,qCACtDH,KAAKI,eAAiBC,UACtBL,KAAKM,SAAWD,UAChBL,KAAKO,UAAYF,UACjBL,KAAKQ,SAAW,KAChBR,KAAKS,kBAAoB,KACzBT,KAAKU,SAAWL,UAChBL,KAAKW,WAAaN,UAClBL,KAAKY,YAAc,E,CAErB,MAAAC,GACE,MAAMC,EAAWd,KAAKe,cACtB,MAAMC,EAAMhB,KAAKiB,SACjB,OAAQC,EAAEC,EAAM,KAAMD,EAAE,MAAO,CAAEE,MAAO,aAAeF,EAAE,MAAO,CAAEE,MAAO,UAAYF,EAAE,WAAY,CAAEG,MAAO,MAAQH,EAAE,MAAO,CAAEE,MAAO,cAAgBF,EAAE,0BAA2B,CAAEZ,SAAUN,KAAKM,SAAUF,eAAgBJ,KAAKI,eAAgBkB,OAAQ,GAAGtB,KAAKY,yBAA0BW,SAAU,OAASL,EAAE,iBAAkB,CAAEM,UAAWC,EAAe,kCAAoCzB,KAAKM,UAAWF,eAAgBJ,KAAKI,kBAAoBc,EAAE,KAAM,CAAEE,MAAO,sBAAwBF,EAAE,oBAAqB,CAAEZ,SAAUN,KAAKM,SAAUF,eAAgBJ,KAAKI,eAAgBkB,OAAQ,GAAGtB,KAAKY,6BAA+BM,EAAE,MAAO,KAAMA,EAAE,yBAA0B,CAAEZ,SAAUN,KAAKM,SAAUF,eAAgBJ,KAAKI,eAAgBkB,OAAQ,GAAGtB,KAAKY,2BAA6BM,EAAE,MAAO,CAAEE,MAAO,YAAcF,EAAE,MAAO,KAAM,OAAQ,IAAKA,EAAE,IAAK,CAAEQ,KAAMV,EAAKW,OAAQ,UAAYX,IAAOhB,KAAKO,WAAcW,EAAE,MAAO,KAAM,QAAS,IAAKA,EAAE,IAAK,CAAEQ,KAAMZ,EAAUa,OAAQ,UAAYb,OAAgBI,EAAE,OAAQ,CAAEU,KAAM,eAAiBV,EAAE,yBAA0B,CAAEW,cAAe7B,KAAK8B,gBAAiBC,iBAAkB,IAAI/B,KAAKC,mBAAoBD,KAAKG,UAAU6B,KAAK,KAAMC,UAAW,MAAOb,MAAO,YAAahB,eAAgBJ,KAAKI,eAAgBoB,UAAW,kCAAoCxB,KAAKM,SAAUE,SAAU,KAAMC,kBAAmBT,KAAKS,kBAAmBC,SAAUV,KAAKU,SAAUC,WAAYX,KAAKW,aAAeO,EAAE,MAAO,CAAEE,MAAO,qCAAuCF,EAAE,2BAA4B,CAAEZ,SAAUN,KAAKM,SAAUC,UAAWP,KAAKO,UAAW2B,MAAO,UAAWC,KAAM,UAAWC,YAAa,kBAAoBlB,EAAE,OAAQ,CAAEU,KAAM,c,CAO7mD,WAAAb,GACE,OAAOsB,EAAa,kCAAoCrC,KAAKM,SAAUN,KAAKU,SAAUV,KAAKW,W,CAS7F,MAAAM,GACE,OAAOjB,KAAKe,cAAcuB,QAAQ,MAAQtC,KAAKO,UAAW,G,CAM5D,aAAAuB,GACE,OAAOS,IACL,GAAIA,EAAMC,OAAOC,eAAeC,SAAW,EAAG,CAC5CH,EAAMZ,OAAOgB,Q"}