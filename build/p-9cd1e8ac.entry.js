import{r as t,h as n,H as e,d as o}from"./p-1bafedb0.js";import{i as r}from"./p-27a92608.js";import{i as s}from"./p-fbcdaa2f.js";import{s as i}from"./p-855a8bbd.js";const p=":host{display:block}.loading{display:flex;align-items:center;justify-content:center;background-color:var(--ion-color-light-tint, #fafafa)}";const a=["#322659","#44337A","#553C9A","#6B46C1","#805AD5","#9F7AEA","#B794F4","#D6BCFA","#E9D8FD","#FAF5FF","#E9D8FD","#D6BCFA","#B794F4","#9F7AEA","#805AD5","#6B46C1","#553C9A","#44337A"];const c=()=>`\n    PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n\n    SELECT (group_concat(?propertyname;separator=", ") as ?propertynames) (Max(?propertycount) as ?propertycounts)\n    WHERE {\n    {\n        SELECT  ?property (count(?entityUri) as ?propertycount)\n        WHERE {\n            ?entityUri ?property ?object .\n            ?property1 <http://www.w3.org/2002/07/owl#inverseOf> ?property .\n        }\n        GROUP BY ?property\n    }\n    ?property rdfs:label ?propertyname\n    FILTER (lang(?propertyname) = 'en')\n    }\n    GROUP BY ?property\n    ORDER by DESC(?propertycounts)\n`;const l=class{constructor(n){t(this,n);this.sparqlEndpoint=undefined;this.width=undefined;this.height=undefined;this.loading=undefined}async componentWillLoad(){if(!r()){this.loading=true;const t=await s();i(this.sparqlEndpoint,c()).then((n=>{var e;const o=(e=n===null||n===void 0?void 0:n.results)===null||e===void 0?void 0:e.bindings;const r=o.map((t=>t.propertynames.value));const s=o.map((t=>parseInt(t.propertycounts.value)));const i=[];for(let t=0;t<s.length;t++){i.push(a[t%a.length])}const p=[{labels:r,values:s,type:"pie",textinfo:"label+percent",textposition:"inside",marker:{colors:i}}];const c=s.length;const l=Math.round(s.reduce(((t,n)=>t+n),0)/1e3);const d={width:this.width,height:this.height,title:`Distribution of ${c} properties (${l}k statements)`,showlegend:false};t.newPlot(this.el,p,d);this.loading=false}))}}render(){return n(e,null,this.loading&&n("div",{style:{width:this.width+"px",height:this.height+"px"},class:"loading"},n("ion-spinner",{name:"dots"})))}get el(){return o(this)}};l.style=p;export{l as geov_property_distri};
//# sourceMappingURL=p-9cd1e8ac.entry.js.map