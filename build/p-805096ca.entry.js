import{r as t,h as s,H as i}from"./p-1bafedb0.js";import{s as n}from"./p-855a8bbd.js";import{s as e,g as o,a}from"./p-1445007b.js";const l=":host{display:block}";const d=t=>`\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX geov: <http://geovistory.org/resource/>\n\nSELECT ?o\nWHERE {\n  geov:${t} rdfs:label ?o .\n}\nLIMIT 1\n`;const r=class{constructor(s){t(this,s);this.buttonClick=t=>{this.msg="clicked"+t.offsetX};this._ssrId=undefined;this.sparqlEndpoint=undefined;this.entityId=undefined;this.data=undefined;this.msg=undefined;e(this)}async componentWillLoad(){this.data=o(this._ssrId);if(!this.data){this.data={loading:true};await this.fetchData().then((t=>{this.data=t;a(this._ssrId,t);return t})).catch((t=>{this.data=t;return t}));this.msg="component data was fetched by component"}}async fetchData(){return n(this.sparqlEndpoint,d(this.entityId)).then((t=>{var s,i,n,e;return Object.assign(Object.assign({},this.data),{label:((e=(n=(i=(s=t===null||t===void 0?void 0:t.results)===null||s===void 0?void 0:s.bindings)===null||i===void 0?void 0:i[0])===null||n===void 0?void 0:n.o)===null||e===void 0?void 0:e.value)+" fetched at: "+(new Date).toTimeString(),loading:false})})).catch((t=>Object.assign(Object.assign({},this.data),{error:true,loading:false})))}render(){return s(i,null,s("div",null,this.msg),this.data.label,this.data.loading?`loading...`:``,this.data.error?`error!`:``,!this.data.label&&!this.data.loading&&!this.data.error?s("span",{class:"no-label-found"},"no label found"):``,s("button",{onClick:this.buttonClick},"click me!"),s("slot",null))}};r.style=l;export{r as geov_data_fetch_example};
//# sourceMappingURL=p-805096ca.entry.js.map